exports.ids=[10],exports.modules={162:function(t,e,l){"use strict";l.r(e);l(52),l(17);var n=l(32),r=l.n(n),o=(l(48),l(30)),h=l.n(o),c=(l(49),l(31)),m={name:"CreateBangumiQuestion",components:{VForm:l.n(c).a,VField:h.a,VRadio:r.a},data:()=>({loading:!1,title:"",answers:[{value:"",key:0},{value:"",key:1},{value:"",key:2},{value:"",key:3}],rightOpt:-1,rule:null}),computed:{slug(){return this.$route.query.slug},rightAnswerOpts(){const t=["A","B","C","D"];return this.answers.map((e,l)=>({label:t[l],value:e.key}))}},mounted(){this.getRule()},methods:{getRule(){this.$axios.$get("v1/join/rule/show",{params:{slug:this.slug}}).then(data=>{this.rule=data}).catch()},handleSubmit(){this.title.trim()?this.answers.map(t=>t.value).filter(t=>t).length<2?this.$toast.info("至少要有2个选项"):-1!==this.rightOpt?this.answers.filter(t=>t.key===this.rightOpt)[0].value.trim()?(this.loading=!0,this.$axios.$post("v1/join/create",{title:this.title,answers:this.answers.map(t=>t.value).filter(t=>t),right_index:this.rightOpt,bangumi_slug:this.slug}).then(()=>{this.$toast.success("提交成功"),this.title="",this.answers=[{value:"",key:0},{value:"",key:1},{value:"",key:2},{value:"",key:3}],this.rightOpt=-1}).catch(t=>{this.$toast.error(t.message),this.loading=!1})):this.$toast.info("正确选项不能为空"):this.$toast.info("请选择正确选项"):this.$toast.info("题目不能为空")}},head:()=>({title:"添加题目"})},d=l(1),component=Object(d.a)(m,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("VForm",{attrs:{id:"create-bangumi-question",full:"",loading:t.loading},on:{submit:t.handleSubmit}},[l("VField",{attrs:{"min-row":2,"max-len":50,placeholder:"请输入题目",label:"题目（需要审核通过之后才会加入题库）"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),t._l(t.answers,(function(e,n){return l("VField",{key:e.key,attrs:{label:"选项"+(n+1),placeholder:"请输入答案（20字以内）","max-len":20},model:{value:e.value,callback:function(l){t.$set(e,"value",l)},expression:"item.value"}})})),t._v(" "),l("VField",{attrs:{label:"答案（题目为单选题，正确选项不能为空）"}},[l("VRadio",{attrs:{inline:"",label:t.rightAnswerOpts},model:{value:t.rightOpt,callback:function(e){t.rightOpt=e},expression:"rightOpt"}})],1)],2)}),[],!1,null,null,"675e3fac");e.default=component.exports},48:function(t,e){t.exports={}},49:function(t,e){t.exports={}},52:function(t,e){t.exports={}}};