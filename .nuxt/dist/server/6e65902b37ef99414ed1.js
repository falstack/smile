exports.ids=[5],exports.modules={103:function(e,t,r){"use strict";r(48),r(11);var n=r(31),l=r.n(n),o=(r(49),r(30)),d={name:"QaItem",components:{VButton:r.n(o).a,VField:l.a},props:{item:{type:Object,required:!0},order:{type:Number,required:!0},isTrial:{type:Boolean,default:!1},extra:{type:Object,default:()=>{}}},data(){return{rightAnswer:(()=>{const e=this.item.id.toString(),t=this.extra.answers||{};let r="";const n=Object.keys(t);for(let i=0;i<n.length;i++)if(n[i].toString()===e){r=t[n[i]];break}return r})(),title:this.item.title,loading:!1}},methods:{changeRightAnswer(e){this.isTrial&&(this.rightAnswer=e)},answerNumber:e=>["A","B","C","D"][e],handleAnswerClick(e){this.isTrial||(this.rightAnswer=e,this.$emit("select",{questionId:this.item.id,answerId:e}))},handleUserClick(){this.$bridge.navigateTo({url:`/pages/user/show/index?slug=${this.item.user.slug}`})},handleBangumiClick(){this.$bridge.navigateTo({url:`/pages/bangumi/show/index?slug=${this.item.bangumi.slug}`})},handleDelete(){this.loading||this.$alert({title:"提示",message:"删除后不可恢复，确认要删除吗？",buttons:["取消","确定"],callback:e=>{e&&(this.loading=!0,this.$axios.$post("v1/join/delete",{id:this.item.id}).then(()=>{this.$toast.success("删除成功"),this.$emit("delete",this.item.id)}).catch(e=>{this.$toast.error(e.message)}).finally(()=>{this.loading=!1}))}})},handlePass(){!this.loading&&this.title&&(this.loading=!0,this.$axios.$post("v1/join/recommend",{id:this.item.id,right_id:this.rightAnswer,title:this.title}).then(()=>{this.$toast.success("入库成功"),this.$emit("delete",this.item.id)}).catch(e=>{this.$toast.error(e.message)}).finally(()=>{this.loading=!1}))}}},c=r(1);var component=Object(c.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.$style.qaItem},[e._ssrNode("<div"+e._ssrClass(null,e.$style.header)+">","</div>",[e.isTrial?r("VField",{class:e.$style.title,attrs:{"min-row":1,"max-row":3,"max-len":50,close:!1,label:""+e.order},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}):[r("div",{class:e.$style.order,domProps:{textContent:e._s(e.order)}}),e._v(" "),r("p",{class:e.$style.title,domProps:{innerHTML:e._s(e.title)}})]],2),e._ssrNode(" <div"+e._ssrClass(null,e.$style.main)+">"+e._ssrList(e.item.answers,(function(t,r,n){var l,o;return"<div"+e._ssrClass(null,[e.$style.answer,(l={},l[e.$style.isSelected]=!e.isTrial&&r===e.rightAnswer,l)])+"><div"+e._ssrClass(null,[e.$style.order,(o={},o[e.$style.isRight]=e.isTrial&&r===e.rightAnswer,o)])+">"+e._ssrEscape(e._s(e.answerNumber(n)))+"</div> <p>"+e._s(t)+"</p></div>"}))+"</div> "),e._ssrNode("<div"+e._ssrClass(null,e.$style.footer)+">","</div>",[e._ssrNode("<div"+e._ssrClass(null,e.$style.intro)+'><div class="oneline"><span>出题人：</span> <span>'+e._ssrEscape(e._s(e.item.user.nickname))+"</span></div> "+(e.isTrial?'<div class="oneline"><span>番の剧：</span> <span>'+e._ssrEscape(e._s(e.item.bangumi.name))+"</span></div>":"\x3c!----\x3e")+"</div> "),e.isTrial?e._ssrNode("<div"+e._ssrClass(null,e.$style.control)+">","</div>",[r("VButton",{attrs:{size:"small",theme:"danger",text:""},on:{click:e.handleDelete}},[e._v("\n        拒绝\n      ")]),e._ssrNode(" "),r("VButton",{attrs:{size:"small",theme:"success"},on:{click:e.handlePass}},[e._v("\n        通过\n      ")])],2):e._e()],2)],2)}),[],!1,(function(e){var t=r(69);t.__inject__&&t.__inject__(e),this.$style=t.locals||t}),null,"52518a13");t.a=component.exports},108:function(e,t,r){"use strict";r.r(t);var n=r(70),l=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=l.a},164:function(e,t,r){"use strict";r.r(t);var n={name:"AdminQaTrial",components:{QaItem:r(103).a},computed:{query(){return{...this.$route.query,$axios:this.$axios,status:0}}},methods:{handleDelete(e){this.$refs.loader.delete(e)}},head:()=>({title:"审核题目"})},l=r(1);var component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"trial-qa"}},[r("FlowLoader",{ref:"loader",attrs:{func:"getBangumiQuestionTrials",type:"page",query:e.query},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.flow,l=t.extra;return r("div",{},e._l(n,(function(t,n){return r("QaItem",{key:t.id,attrs:{item:t,"is-trial":"",extra:l,order:n+1},on:{delete:e.handleDelete}})})),1)}},{key:"error",fn:function(t){var r=t.error;return[e._v("\n      "+e._s(r.message)+"\n    ")]}}])})],1)}),[],!1,(function(e){var t=r(108);t.__inject__&&t.__inject__(e)}),null,"fc41ea6a");t.default=component.exports},48:function(e,t){e.exports={}},49:function(e,t){e.exports={}},57:function(e,t){e.exports={"qa-item":"qa-item_3N5Xs",qaItem:"qa-item_3N5Xs",header:"header_AMObU",order:"order_2Lrmw",title:"title_-CJOD",main:"main_2bbkH",answer:"answer_12nXM","is-right":"is-right_2Bjlo",isRight:"is-right_2Bjlo","is-selected":"is-selected_1s5R_",isSelected:"is-selected_1s5R_",footer:"footer_3zt4D",intro:"intro_1Z2UY",control:"control_3tb4E"}},69:function(e,t,r){"use strict";r.r(t);var n=r(57),l=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=l.a},70:function(e,t){e.exports={}}};