exports.ids=[14],exports.modules={111:function(t,e,n){"use strict";n.r(e);var r=n(70),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);e.default=o.a},112:function(t,e,n){"use strict";n.r(e);var r=n(71),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);e.default=o.a},113:function(t,e,n){"use strict";n.r(e);var r=n(72),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);e.default=o.a},114:function(t,e,n){"use strict";n.r(e);var r=n(73),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);e.default=o.a},115:function(t,e,n){"use strict";n.r(e);var r=n(74),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);e.default=o.a},116:function(t,e,n){"use strict";n.r(e);var r=n(75),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);e.default=o.a},117:function(t,e,n){"use strict";n.r(e);var r=n(76),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);e.default=o.a},118:function(t,e,n){"use strict";n.r(e);var r=n(77),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);e.default=o.a},119:function(t,e,n){"use strict";n.r(e);var r=n(78),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);e.default=o.a},120:function(t,e,n){"use strict";n.r(e);var r=n(79),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);e.default=o.a},124:function(t,e,n){"use strict";n.r(e);var r={name:"JsonHeader",props:{item:{type:Object,required:!0}},render(t){return t("h2",{class:this.$style.h2,domProps:{innerHTML:this.item.data.text}})}},o=n(1);var header=Object(o.a)(r,void 0,void 0,!1,(function(t){var e=n(111);e.__inject__&&e.__inject__(t),this.$style=e.locals||e}),null,"6dc15c0b").exports,c={name:"JsonImage",props:{item:{type:Object,required:!0}}};var l=Object(o.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.image},[n("VImg",{attrs:{src:t.item.data.file.url,stretched:t.item.data.stretched,width:t.item.data.file.width,height:t.item.data.file.height}}),t._ssrNode(" "+(t.item.data.caption?"<p>"+t._ssrEscape(t._s(t.item.data.caption))+"</p>":"\x3c!----\x3e"))],2)}),[],!1,(function(t){var e=n(112);e.__inject__&&e.__inject__(t),this.$style=e.locals||e}),null,"78c01c4d").exports,d={name:"JsonParagraph",props:{item:{type:Object,required:!0}}};var _=Object(o.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("p",{class:this.$style.paragraph,domProps:{innerHTML:this._s(this.item.data.text.replace(/\n/g,"<br>"))}},[])}),[],!1,(function(t){var e=n(113);e.__inject__&&e.__inject__(t),this.$style=e.locals||e}),null,"5b767de0").exports,h={name:"JsonList",props:{item:{type:Object,required:!0}}};var m=Object(o.a)(h,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.$style.list},[t._ssrNode("ordered"===t.item.data.style?"<ol>"+t._ssrList(t.item.data.items,(function(li,e){return"<li>"+t._s(li)+"</li>"}))+"</ol>":"<ul>"+t._ssrList(t.item.data.items,(function(li,e){return"<li>"+t._s(li)+"</li>"}))+"</ul>")])}),[],!1,(function(t){var e=n(114);e.__inject__&&e.__inject__(t),this.$style=e.locals||e}),null,"55b9db1c").exports,f={name:"JsonDelimiter",props:{item:{type:Object,required:!0}}};var v=Object(o.a)(f,(function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.$style.delimiter},[])}),[],!1,(function(t){var e=n(115);e.__inject__&&e.__inject__(t),this.$style=e.locals||e}),null,"1e9625f9").exports,y={name:"JsonChecklist",props:{item:{type:Object,required:!0}}};var x=Object(o.a)(y,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("ul",{class:t.$style.checklist},[t._ssrNode(t._ssrList(t.item.data.items,(function(option,e){return"<li>"+(option.checked?"<i></i>":"<em></em>")+" <div>"+t._s(option.text)+"</div></li>"})))])}),[],!1,(function(t){var e=n(116);e.__inject__&&e.__inject__(t),this.$style=e.locals||e}),null,"5c64aa18").exports,$=n(35),j={name:"JsonLink",directives:{copy:$.copy},props:{item:{type:Object,required:!0}},methods:{handleCopySuccess(){this.$toast.info("链接已复制到剪切板")}}};var C=Object(o.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.link},[n("div",{directives:[{name:"copy",rawName:"v-copy",value:t.item.data.link,expression:"item.data.link"},{name:"copy",rawName:"v-copy:callback",value:t.handleCopySuccess,expression:"handleCopySuccess",arg:"callback"}],class:t.$style.a},[t._ssrNode((t.item.data.meta.image&&t.item.data.meta.image.url?"<img"+t._ssrAttr("src",t.item.data.meta.image.url)+' width="65" height="65"'+t._ssrClass(null,t.$style.logo)+">":"\x3c!----\x3e")+" <div"+t._ssrClass(null,t.$style.content)+"><h3>"+t._ssrEscape(t._s(t.item.data.meta.title))+"</h3> <p>"+t._ssrEscape(t._s(t.item.data.meta.description))+"</p> <span>"+t._ssrEscape(t._s(t.item.data.link.replace(/https?:\/\//,"")))+"</span></div>")])])}),[],!1,(function(t){var e=n(117);e.__inject__&&e.__inject__(t),this.$style=e.locals||e}),null,"4cb2cc78").exports,k={name:"JsonBaidu",directives:{copy:$.copy},props:{item:{type:Object,required:!0},reward:{type:Boolean,required:!0}},methods:{handleCopySuccess(){this.$toast.info("链接已复制到剪切板")}}};var w=Object(o.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.baidu},[t._ssrNode("<div"+t._ssrClass(null,t.$style.a)+">","</div>",[t._ssrNode("<i"+t._ssrClass("iconfont ic-baidu-cloud",t.$style.logo)+"></i> "),n("div",{directives:[{name:"copy",rawName:"v-copy",value:t.item.data.url,expression:"item.data.url"},{name:"copy",rawName:"v-copy:callback",value:t.handleCopySuccess,expression:"handleCopySuccess",arg:"callback"}],class:t.$style.content},[t._ssrNode("<p"+t._ssrClass("oneline",t.$style.link)+">"+t._ssrEscape(t._s(t.item.data.url))+"</p> <p"+t._ssrClass(null,t.$style.password)+">"+(0===t.item.data.visit_type||t.reward?t._ssrEscape("\n          密码："+t._s(t.item.data.password)+"\n        "):"\n          密码投食后可见\n        ")+"</p>")])],2)])}),[],!1,(function(t){var e=n(118);e.__inject__&&e.__inject__(t),this.$style=e.locals||e}),null,"2f47c10d").exports,E={name:"JsonVote",props:{item:{type:Object,required:!0},vote:{type:Array,required:!0},slug:{type:String,required:!0}},data:()=>({selected:[],submitting:!1,voted:!1,stat:[],maxCount:0}),watch:{vote(t){this.selected=t.map(t=>t),t.length&&(this.voted=!0,this.getVoteStat())}},methods:{getVoteStat(){this.$axios.$get("v1/pin/vote_stat",{params:{slug:this.slug}}).then(data=>{this.stat=data,this.maxCount=Math.max(...Object.values(this.stat))}).catch(()=>{})},handleSelect(option){const{selected:t,voted:e}=this;if(e)return;const n=t.indexOf(option.id);if(~n)return void t.splice(n,1);const r=this.item.data.max_select;r<=t.length?1===r&&t.splice(n,1,option.id):t.push(option.id)},checkSelected(option){return~this.selected.indexOf(option.id)},submit(){this.submitting||this.voted||(this.selected.length?this.item.data.expired_at&&1e3*this.item.data.expired_at<Date.now()?this.$toast.info("投票已截止"):(this.submitting=!0,this.$axios.$post("v1/social/vote",{pin_slug:this.slug,answer_hash:this.selected}).then(()=>{this.$toast.success("投票成功"),this.voted=!0,this.getVoteStat()}).catch(t=>{this.$toast.error(t.message)}).finally(()=>{this.submitting=!1})):this.$toast.info("至少选择一项"))},computeItemStyle(option,t){const e=this.stat[option.id]||0;return{width:e?`${75*e/this.maxCount}%`:"0%",backgroundColor:this.getRandomColor(t)}},getRandomColor:t=>["rgba(255,170,170,.5)","rgba(255,148,39,.5)","rgba(252,196,25,.5)","rgba(32,201,151,.5)","rgba(18,183,245,.5)","rgba(173,181,189,.5)"][t%6]}};class S{constructor({minLength:t,shareLink:e}={}){this.config={org:"calibur.tv",appendStr:"文章著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。",minLength:t||140,shareLink:e||window.location.href.split("?")[0]},this.prefix={org:"来源",link:"链接",author:"作者"}}bind(t,{minLength:e,authorNickname:n,shareLink:r,appendStr:o}={}){t.addEventListener("copy",t=>{const c=e||this.config.minLength,l=r||this.config.shareLink,d=o||this.config.appendStr,_=window.getSelection().getRangeAt(0),h=this.getHTMLParser("");h&&h.appendChild(_.cloneContents());const m=_.toString().trim(),f=h?h.innerHTML:this.getRangeHtml(_);if(document.createElement("div").innerHTML=f,m.length>=c){const e=this.getCopyHtml(f,l,n,d),r=this.getCopyText(m,l,n,d);void 0===t.clipboardData&&this.hack(e,_);try{t.clipboardData.setData("text/plain",r),t.clipboardData.setData("text/html",e),t.preventDefault()}catch(t){this.hack(e,_)}}})}abort(t){t.addEventListener("copy",t=>(t.stopPropagation(),t.preventDefault(),t.cancelBubble=!1,!1))}hack(text,t){const e=document.createElement("div");e.innerHTML=text,e.style.position="fixed",e.style.left="-9999px",document.body.appendChild(e),window.getSelection().selectAllChildren(e),setTimeout(()=>{try{window.getSelection().removeAllRanges(),window.getSelection().addRange(t)}catch(t){}document.body.removeChild(e)},0)}getCopyHtml(html,t,e,n){return`<div><div>${html}</div>${this.getExtraCopyright(t,e,n).join("<br>")}</div>`}getCopyText(text,t,e,n){return text+this.getExtraCopyright(t,e,n).join("\n")}getExtraCopyright(t,e,n){return e?["","",`${this.prefix.author}：${e}`,`${this.prefix.link}：${t}`,`${this.prefix.org}：${this.config.org}`,n]:["","",`${this.prefix.link}：${t}`,`${this.prefix.org}：${this.config.org}`,n]}getRangeHtml(text){const div=document.createElement("div");return div.appendChild(text.cloneContents()),div.outerHTML}getHTMLParser(t){try{return(new window.DOMParser).parseFromString(t,"text/html").body}catch(e){const n=document.implementation.createHTMLDocument("");return n.body.innerHTML=t,n.body}}}var L={name:"JsonContent",components:{"v-header":header,"v-image":l,"v-paragraph":_,"v-list":m,"v-delimiter":v,"v-checklist":x,"v-link":C,"v-baidu":w,"v-vote":Object(o.a)(E,(function(){var t,e=this,n=e.$createElement;return(e._self._c||n)("div",{class:e.$style.vote},[e._ssrNode("<div><header>"+e._ssrEscape("投票（"+e._s(1===e.item.data.max_select?"单选":"最多选"+e.item.data.max_select+"个")+"）")+"</header> <ul>"+e._ssrList(e.item.data.items,(function(option,t){var n;return"<li"+e._ssrClass("oneline",((n={})[e.$style.selected]=e.checkSelected(option),n))+"><span"+e._ssrClass(null,e.$style.count)+e._ssrStyle(null,e.computeItemStyle(option,t),null)+">"+e._s(e.stat[option.id]?e.stat[option.id]+"票&nbsp;&nbsp;":"")+"</span> <span>"+e._s(t+1+". "+option.text)+"</span> <i></i></li>"}))+"</ul> <footer><span>"+e._ssrEscape("截止时间："+e._s(e.item.data.expired_at?e.$utils.timeAgo(e.item.data.expired_at):"无限期"))+"</span> <button"+e._ssrClass(null,(t={},t[e.$style.active]=e.selected.length&&!e.voted,t))+">"+e._ssrEscape("\n        "+e._s(e.submitting?"提交中":e.voted?"已投过票":"确认")+"\n      ")+"</button></footer></div>")])}),[],!1,(function(t){var e=n(119);e.__inject__&&e.__inject__(t),this.$style=e.locals||e}),null,"ba671130").exports},props:{content:{required:!0,type:Array},reward:{type:Boolean,default:!1},vote:{type:Array,default:()=>[]},slug:{type:String,default:""}},mounted(){(new S).bind(this.$el)}},O={name:"PinShow",components:{JsonContent:Object(o.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"json-content"},t._l(t.content,(function(e,r){return n("v-"+e.type,{key:r,tag:"component",attrs:{item:e,reward:t.reward,vote:t.vote,slug:t.slug}})})),1)}),[],!1,null,null,"2b42735f").exports},asyncData:({app:t,error:e,params:n})=>t.$axios.$get("v1/pin/show",{params:{slug:n.slug}}).then(data=>data).catch(e),data:()=>({slug:"",intro:"",title:null,author:null,bangumi:null,content:[],trial_type:0,comment_type:0,last_top_at:0,recommended_at:0,published_at:"",last_edit_at:"",reward_status:!1,like_count:0,visit_count:0,mark_count:0,comment_count:0,reward_count:0,vote_hash:[]}),methods:{handleBangumiClick(){this.$bridge.navigateTo({url:`/pages/bangumi/show/index?slug=${this.bangumi.slug}`})}}};var H=Object(o.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"pin-show"}},[t._ssrNode((t.title?'<p class="title">'+t._ssrEscape(t._s(t.title.text))+"</p>":"\x3c!----\x3e")+' <div class="state">'+(t.bangumi?"<span>"+t._ssrEscape(t._s(t.bangumi.name))+'</span> <span class="dot"> · </span>':"\x3c!----\x3e")+" <span>"+t._ssrEscape(t._s(t.$utils.timeAgo(t.published_at)))+"</span> "+(t.visit_count?'<span class="dot"> · </span> <span>'+t._ssrEscape(t._s(t.$utils.shortenNumber(t.visit_count)+"阅读"))+"</span>":"\x3c!----\x3e")+"</div> "),n("JsonContent",{attrs:{slug:t.slug,content:t.content,reward:t.reward_status,vote:t.vote_hash}})],2)}),[],!1,(function(t){var e=n(120);e.__inject__&&e.__inject__(t)}),null,"7be7bcdc");e.default=H.exports},70:function(t,e){t.exports={h2:"h2_29h8C"}},71:function(t,e){t.exports={image:"image_2HoYb"}},72:function(t,e){t.exports={paragraph:"paragraph_1OWG2"}},73:function(t,e){t.exports={list:"list_rxwoA"}},74:function(t,e){t.exports={delimiter:"delimiter_3ksS5"}},75:function(t,e){t.exports={checklist:"checklist_35Trq"}},76:function(t,e){t.exports={link:"link_1cdqF",a:"a_ekjVU",content:"content_31mUQ",logo:"logo_3t3p1"}},77:function(t,e){t.exports={baidu:"baidu_3yD19",a:"a_15D0z",logo:"logo_3fZIb",content:"content_2vYlq",link:"link_2GrbH"}},78:function(t,e){t.exports={vote:"vote_1AMl_",selected:"selected_1h5XP",count:"count_3bLzQ",active:"active_2YTSY"}},79:function(t,e){t.exports={}}};