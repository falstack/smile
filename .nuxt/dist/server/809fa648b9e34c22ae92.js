/*! For license information please see LICENSES */
exports.ids=[19],exports.modules={111:function(t,e,o){var content=o(112);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals),o(3).default("4f9463e2",content,!0)},112:function(t,e,o){(e=o(2)(!1)).push([t.i,"@keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@-webkit-keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}@-webkit-keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}.ce-header{padding:10px 0;margin:0;line-height:1.5em;outline:none}.ce-header div,.ce-header p{padding:0!important;margin:0!important}.ce-header[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.ce-header[contentEditable=true][data-placeholder]:empty:before{opacity:1}.ce-header[contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}",""]),t.exports=e},113:function(t,e,o){var content=o(114);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals),o(3).default("70e8b928",content,!0)},114:function(t,e,o){(e=o(2)(!1)).push([t.i,"@keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@-webkit-keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}@-webkit-keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}.baidu-resource{padding:.7em 0}.baidu-resource-wrap{overflow:hidden;padding:15px;background-color:#fff;border:1px solid rgba(201,201,204,.48);box-shadow:0 1px 3px rgba(0,0,0,.1);border-radius:6px}.baidu-resource-password,.baidu-resource-url{display:block;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;border:1px solid rgba(201,201,204,.48);box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);border-radius:3px;padding:10px 12px;margin-bottom:20px}.baidu-resource-role-wrap{color:#99a2aa}.baidu-resource-label{margin-right:20px;margin-left:5px;cursor:pointer}",""]),t.exports=e},115:function(t,e,o){var content=o(116);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals),o(3).default("f4d1cbfa",content,!0)},116:function(t,e,o){(e=o(2)(!1)).push([t.i,'@keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@-webkit-keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}@-webkit-keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}.embed-tool iframe{margin:0 auto;display:block}.editor-video-wrap{position:relative;width:100%;height:0;padding-top:60%}.editor-video-wrap iframe{position:absolute;left:0;top:0;width:100%;height:100%}.embed-tool--loading .embed-tool__caption{display:none}.embed-tool--loading .embed-tool__preloader{display:block}.embed-tool--loading .embed-tool__content{display:none}.embed-tool__preloader{display:none;position:relative;height:200px;box-sizing:border-box;border-radius:5px;border:1px solid #e6e9eb}.embed-tool__preloader:before{content:"";position:absolute;z-index:3;left:50%;top:50%;width:30px;height:30px;margin-top:-25px;margin-left:-15px;border-radius:50%;border:2px solid #cdd1e0;border-top-color:#ff6881;box-sizing:border-box;-webkit-animation:embed-preloader-spin 2s linear infinite;animation:embed-preloader-spin 2s linear infinite}.embed-tool__url{position:absolute;bottom:20px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);max-width:250px;color:#7b7e89;font-size:11px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.embed-tool__caption{margin-top:7px;display:inline-block;position:relative;width:auto!important;left:50%!important;-webkit-transform:translateX(-50%)!important;transform:translateX(-50%)!important;text-align:center!important;box-shadow:none!important;border-top-width:0!important;border-left-width:0!important;border-right-width:0!important;border-radius:0!important;min-width:115px!important;border-color:#e7e7e7}.embed-tool__caption:before{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.embed-tool__caption[contentEditable=true][data-placeholder]:before{position:absolute!important;content:"文字描述";color:#707684;font-weight:400;width:auto;opacity:0}.embed-tool__caption[contentEditable=true][data-placeholder]:empty:before{opacity:1}.embed-tool__caption[contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}@-webkit-keyframes embed-preloader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes embed-preloader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}',""]),t.exports=e},117:function(t,e,o){var content=o(118);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals),o(3).default("a4606c00",content,!0)},118:function(t,e,o){var n=o(2),r=o(119),d=o(120);e=n(!1);var l=r(d);e.push([t.i,"@keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@-webkit-keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}@-webkit-keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}.ce-delimiter{line-height:1.6em;width:100%;text-align:center;background-image:url("+l+");background-position:50%;background-repeat:no-repeat;background-size:contain;height:100px}",""]),t.exports=e},119:function(t,e,o){"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},120:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+gAAAAeCAMAAACIXsRPAAAAmVBMVEUAAABnZ2cAAAAAAABGRkYAAAA0NDQaGhp2dnZ0dHRVVVV9fX17e3tiYmJsbGx8fHx7e3t8fHxycnJvb298fHx5eXl3d3dubm59fX0DAwMFBQVAQEAqKioAAAAICAgKCgoQEBAWFhYMDAw7OztVVVUbGxsNDQ1CQkI0NDQhISFjY2MnJydLS0stLS10dHReXl4vLy9tbW1HR0ck34UaAAAAGXRSTlMANgoEGAYSDnBgIOmiLD79r7dVTMGMe0fXvDJrsAAAAjZJREFUeNrt20dy4zAUBNBv5qwsG5A+AGZR2XP/w43oVDNbayEX3K8ILrhmF5oASAAAAAAAAAC/gOvTpzAkALCJT07ghP+GfRxIOoBF3HmWzV6m2Tp+Tny6CcaHBAAWcZ19aRQLrob6dTZPiMhHzAFs405KrrRmoZjVdr8KyPfeJ3YAsMfiokTVGcXKVELvLpFHI4cAwCLTQbXDSQkWklm2zdSjEO0dwDJPr+dVXCyvhoVWzGKzfCK4i0tvHFQjeDSX3I/X0Es8l5zFzrAQQmnJ7Yrg+0J6lztESVHkTwAPUxTpdJEnSRxN0myeL2b7klkKIZi16mOCO3hJSKNketltT1uAhziM49DxbjI5Hnolymu9a/njG53ZMO9R3u/s7d5zlM3OO83MAuBBpBSsZcUsuNMsNLM2UirJrIRQ0siI4I7qHk3607YzimVZVhLgAcTNeGcuTVUxy7egC/kZ9JuyQ3e/R7Fs6vpY9/2m3tTXDcDj1EPZLGf7umnL07H5c5Bf1V2zPAc4MHMXHCOGnyKaey5REGZZHJAfpV+LcZ05LrAr9E34HQh+FpfeBERe8ZwT5Z/ba1pdI8QcwDZ506fTbDJolpVk5mbtEwBYJlVsdMssdCe4GtKVRwBgF2fec6nl7ZKSuW1SxBzAOr53NrJjXQnBajimMd04WDEGsIrv7U8Ho9pyu7m8xA75mNABLOTkcbyOonUShJjIAezmeJQ4ROSHOCgDYKtgvP6HLTYAAAAAAPi+v0FpO0Tpc50UAAAAAElFTkSuQmCC"},121:function(t,e,o){var content=o(122);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals),o(3).default("c8ad95fe",content,!0)},122:function(t,e,o){(e=o(2)(!1)).push([t.i,'@keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@-webkit-keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}@-webkit-keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}.cdx-checklist__item{display:-webkit-box;display:flex;box-sizing:content-box;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center}.cdx-checklist__item-text{-webkit-box-flex:1;flex:1;padding:10px 0;border-radius:0;border-bottom:1px solid silver}.cdx-checklist__item-checkbox{display:inline-block;flex-shrink:0;position:relative;width:20px;height:20px;margin:10px 10px 10px 0;border-radius:50%;border:1px solid #d0d0d0;background:#fff;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cdx-checklist__item-checkbox:hover{border-color:#b5b5b5}.cdx-checklist__item-checkbox:after{position:absolute;top:5px;left:5px;width:8px;height:5px;border:2px solid #fcfff4;border-top:none;border-right:none;background:transparent;content:"";opacity:0;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.cdx-checklist__item--checked .cdx-checklist__item-checkbox{background:#ff6881;border-color:#ff6881}.cdx-checklist__item--checked .cdx-checklist__item-checkbox:hover{background:#ff6881}.cdx-checklist__item--checked .cdx-checklist__item-checkbox:after{opacity:1}',""]),t.exports=e},123:function(t,e,o){"use strict";"undefined"!=typeof window&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(s){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(s))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}))},124:function(t,e,o){var content=o(125);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals),o(3).default("775f1039",content,!0)},125:function(t,e,o){(e=o(2)(!1)).push([t.i,"@keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@-webkit-keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}@-webkit-keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}.ce-paragraph{line-height:1.6em;outline:none}.ce-paragraph[data-placeholder]:empty:before{content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before{opacity:1}.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus:before,.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before{opacity:0}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}",""]),t.exports=e},126:function(t,e,o){var content=o(127);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals),o(3).default("5603ac65",content,!0)},127:function(t,e,o){(e=o(2)(!1)).push([t.i,'@keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@-webkit-keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}@-webkit-keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}.vote-wrap{border:1px solid rgba(201,201,204,.48);box-shadow:0 1px 3px rgba(0,0,0,.1);border-radius:6px;padding:15px 15px 15px 25px;margin:.7em 0;background-color:#fff}.vote-wrap p{position:relative;margin-bottom:10px;padding-left:10px;margin-left:2px;margin-top:10px}.vote-wrap p:before{content:"";position:absolute;left:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);height:14px;width:3px;background-color:#ff6881}.vote-wrap input{height:40px;line-height:40px;padding:0 10px;border-radius:0;border:none;border-bottom:1px solid #dcdfe6;min-width:100px}.vote-wrap-item{position:relative;height:40px;line-height:40px;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;padding:10px 0;box-sizing:content-box}.vote-wrap-item span{display:block;width:30px}.vote-wrap-item input{-webkit-box-flex:1;flex-grow:1}.vote-wrap-item div{position:absolute;right:-18px;top:10px;width:40px;height:40px;font-size:16px;text-align:center}.vote-wrap .append-btn-wrap{text-align:center}.vote-wrap .vote-append{display:inline-block;position:relative;width:24px;height:24px;line-height:24px;background-color:#ff6881;background-image:-webkit-gradient(linear,right top,left top,from(#ff869a),to(#ff6881));background-image:linear-gradient(-90deg,#ff869a,#ff6881);box-shadow:0 4px 8px 0 rgba(207,29,82,.16);color:#fff;border-radius:50%;margin-top:5px;font-weight:700}.vote-wrap footer .footer-item-wrap{margin-top:10px;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}',""]),t.exports=e},128:function(t,e,o){"use strict";o.r(e);var n=o(73),r=o.n(n);for(var d in n)"default"!==d&&function(t){o.d(e,t,(function(){return n[t]}))}(d);e.default=r.a},129:function(t,e,o){(e=o(2)(!1)).push([t.i,".editor-wrap .ce-paragraph{word-break:break-word!important;word-break:break-all}@keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@-webkit-keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}@-webkit-keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}.editor-wrap{padding:0 10px}.editor-wrap .cdx-button{position:relative}.editor-wrap .image-tool__input{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0}.editor-wrap .ce-block{font-weight:400;font-style:normal}.editor-wrap .ce-block a{display:none}.editor-wrap .ce-block__content{max-width:100%}.editor-wrap .ce-toolbar{position:fixed;top:0;left:0;right:0;width:100%;height:40px;display:-webkit-box!important;display:flex!important;-webkit-transform:none!important;transform:none!important;margin-top:0;box-shadow:none;border:none;border-bottom:1px solid #ebeef5}.editor-wrap .ce-toolbar .ce-toolbox{visibility:visible;opacity:1}.editor-wrap .ce-toolbar .ce-toolbar__plus{display:none!important}.editor-wrap .ce-settings{top:35px!important;bottom:auto!important}.ct--shown{display:none!important}",""]),t.exports=e},130:function(t,e,o){"use strict";o.r(e);var n=o(74),r=o.n(n);for(var d in n)"default"!==d&&function(t){o.d(e,t,(function(){return n[t]}))}(d);e.default=r.a},131:function(t,e,o){(e=o(2)(!1)).push([t.i,"@keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@-webkit-keyframes skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}@keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}@-webkit-keyframes skeleton{0%{width:60%}50%{width:100%}to{width:60%}}#write-pin{position:relative;min-height:100vh;padding-top:40px;padding-bottom:60px}@media only screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3){#write-pin{padding-bottom:80px}}@media only screen and (device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:2){#write-pin{padding-bottom:80px}}@media only screen and (device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:3){#write-pin{padding-bottom:80px}}#write-pin .banner{position:relative;width:100%;height:0;padding-top:56%}#write-pin .banner .v-uploader{position:absolute;left:0;top:0;width:100%;height:100%;background-color:#fafbfd;z-index:0}#write-pin .banner .v-uploader__action{position:absolute;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;color:silver;font-size:20px}#write-pin .banner .image{position:absolute;left:0;top:0;width:100%;height:100%;z-index:1;background-position:50%;background-repeat:no-repeat;background-size:cover}#write-pin .banner .delete{position:absolute;right:0;bottom:0;z-index:2;padding:5px 8px;background-color:rgba(0,0,0,.5);color:#fff;font-size:12px}#write-pin .title{border-bottom:1px solid #ebeef5}#write-pin .footer{position:absolute;left:0;right:0;bottom:0;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:space-evenly;justify-content:space-evenly;-webkit-box-align:center;align-items:center;height:50px;border-top:1px solid #ebeef5}@media only screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3){#write-pin .footer{height:70px;padding-bottom:20px}}@media only screen and (device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:2){#write-pin .footer{height:70px;padding-bottom:20px}}@media only screen and (device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:3){#write-pin .footer{height:70px;padding-bottom:20px}}#write-pin .footer .v-button{-webkit-box-flex:1;flex:1;margin:0 5px}#write-pin .footer .v-button:first-child{margin-left:10px}#write-pin .footer .v-button:last-child{margin-right:10px}",""]),t.exports=e},137:function(t,e,o){"use strict";o.r(e);o(44),o(18);var n=o(33),r=o.n(n),d=(o(46),o(34)),l=o.n(d),c=(o(50),o(35)),h=o.n(c),f=o(48),m=o(49);o(111);class v{constructor({data:data,config:t,api:e}){this.api=e,this._CSS={block:this.api.styles.block,settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive,wrapper:"ce-header"},this._settings=t,this._data=this.normalizeData(data),this.settingsButtons=[],this._element=this.getTag()}normalizeData(data){const t={};return"object"!=typeof data&&(data={}),t.text=data.text||"",t.level=parseInt(data.level)||this.defaultLevel.number,t}render(){return this._element}renderSettings(){const t=document.createElement("DIV");return this.levels.forEach(e=>{const o=document.createElement("SPAN");o.classList.add(this._CSS.settingsButton),this.currentLevel.number===e.number&&o.classList.add(this._CSS.settingsButtonActive),o.innerHTML=e.svg,o.dataset.level=e.number,o.addEventListener("click",()=>{this.setLevel(e.number)}),t.appendChild(o),this.settingsButtons.push(o)}),t}setLevel(t){this.data={level:t,text:this.data.text},this.settingsButtons.forEach(button=>{button.classList.toggle(this._CSS.settingsButtonActive,parseInt(button.dataset.level)===t)})}merge(data){const t={text:this.data.text+data.text,level:this.data.level};this.data=t}validate(t){return""!==t.text.trim()}save(t){return{text:t.innerHTML,level:this.currentLevel.number}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{level:{}}}get data(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data}set data(data){if(this._data=this.normalizeData(data),void 0!==data.level&&this._element.parentNode){const t=this.getTag();t.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(t,this._element),this._element=t}void 0!==data.text&&(this._element.innerHTML=this._data.text||"")}getTag(){const t=document.createElement(this.currentLevel.tag);return t.innerHTML=this._data.text||"",t.classList.add(this._CSS.wrapper),t.contentEditable="true",t.dataset.placeholder=this._settings.placeholder||"",t}get currentLevel(){let t=this.levels.find(t=>t.number===this._data.level);return t||(t=this.defaultLevel),t}get defaultLevel(){return{number:2,tag:"H2"}}get levels(){return[]}onPaste(t){const content=t.detail.data;let e=2;switch(content.tagName){case"H1":e=1;break;case"H3":e=3;break;case"H4":e=4;break;case"H5":e=5;break;case"H6":e=6}this.data={level:e,text:content.innerHTML}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get toolbox(){return{icon:'<svg width="11" height="14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.6 8.15H2.25v4.525a1.125 1.125 0 0 1-2.25 0V1.125a1.125 1.125 0 1 1 2.25 0V5.9H7.6V1.125a1.125 1.125 0 0 1 2.25 0v11.55a1.125 1.125 0 0 1-2.25 0V8.15z"/></svg>',title:"标题"}}}o(113);class k{constructor({data:data}){this.data=data}static get toolbox(){return{title:"百度云",icon:'<svg version="1" xmlns="http://www.w3.org/2000/svg" width="28px" height="28px" viewBox="0 0 298 298" preserveAspectRatio="xMidYMid meet"><g stroke="none"><path d="M135.2 75.6c-11 2.9-20.1 9.5-26.5 19.1-5.1 7.6-7.4 14.6-8.4 24.5-.6 7.4.2 6.7-9.8 8.4-15.2 2.6-30.5 16.1-35.6 31.2-1.8 5.4-2 8.1-1.7 17.5.4 10.6.6 11.6 4.2 18.6 6.5 12.8 17.1 20.9 31.9 24.8 12.1 3.1 26.8.2 37.9-7.5 2.4-1.6 12.2-11.9 21.8-22.8 32.9-37.3 35.7-39.7 46.5-39.7 12.9.1 21.4 8.4 24 23.6.3 2.2 1.1 4.9 1.6 6.1 2.3 5.1 11.4 7.3 16.4 4 12.6-8.3-.4-41.6-19.8-50.8-5.8-2.7-16.1-5.6-20.1-5.6-2.4 0-2.6-.3-2.6-4.4 0-21.7-15.1-41.8-35.4-47.2-6.5-1.7-17.6-1.7-24.4.2zm19.4 21.9c5.7 1.7 12.8 8 15.2 13.5 1.9 4.5 1.8 14.5-.2 19.1-3.7 8.7-12.1 13.9-22.4 13.9-6.2 0-7.5-.4-11.8-3.3-7.4-4.9-10.7-10.4-11.2-18.3-.6-8.7 1.5-14.1 7.8-19.7 7.3-6.6 13.4-8 22.6-5.2zm-44.7 54.4c5 2.6 10.7 9.1 12 13.8 4.6 16.4-5.9 31.5-21.8 31.5-13.6.1-24.1-10-24.1-23.2 0-9.3 5.7-18.6 13.5-22.1 5.5-2.5 15.4-2.5 20.4 0zM225 200.7c-3.9 2.7-4.9 4.5-5 9 0 3.3.6 5 2.9 7.5 2.6 2.9 3.5 3.3 8.1 3.3s5.5-.4 8.1-3.3c6.4-7.2 2.1-18.2-7.3-18.2-2.5 0-5.4.7-6.8 1.7z"/></g></svg>'}}render(){const t=document.createElement("div");t.classList.add("baidu-resource");const e=document.createElement("div");e.classList.add("baidu-resource-wrap"),t.appendChild(e);const o=document.createElement("input");o.classList.add("baidu-resource-url"),o.placeholder="仅支持百度云盘：pan.baidu.com",o.type="text",o.value=this.data&&this.data.url?this.data.url:"",e.appendChild(o);const n=document.createElement("input");n.classList.add("baidu-resource-password"),n.placeholder="填写资源的密码（4~6位）",n.type="text",n.value=this.data&&this.data.password?this.data.password:"",e.appendChild(n);const r=document.createElement("div");r.classList.add("baidu-resource-role-wrap");const d=`${Math.random().toString(36).substring(3,6)}`,l=this.data&&this.data.visit_type?this.data.visit_type:0,c=document.createElement("span");c.textContent="是否需要投食才能看到密码：",r.appendChild(c);const h=document.createElement("input");h.classList.add("baidu-resource-role-public"),h.id=`baidu-resource-role-public-${d}`,h.name=d,h.type="radio",h.value=0,h.checked=0===l,r.appendChild(h);const f=document.createElement("label");f.setAttribute("for",`baidu-resource-role-public-${d}`),f.textContent="否",f.classList.add("baidu-resource-label"),r.appendChild(f);const m=document.createElement("input");m.classList.add("baidu-resource-role-private"),m.id=`baidu-resource-role-private-${d}`,m.type="radio",m.name=d,m.value=1,m.checked=1===l,r.appendChild(m);const v=document.createElement("label");return v.setAttribute("for",`baidu-resource-role-private-${d}`),v.textContent="是",v.classList.add("baidu-resource-label"),r.appendChild(v),e.appendChild(r),t}save(t){const e=t.querySelector(".baidu-resource-url"),o=t.querySelector(".baidu-resource-password"),n=t.querySelector(".baidu-resource-role-public");let r=e.value.trim();return/^https?:\/\//.test(r)||(r="https://"+r),{url:r,password:o.value.trim(),visit_type:n.checked?0:1}}validate(t){return!(!t.url||!t.password)&&!(!/https?:\/\/pan\.baidu\.com\/s\/([\w\W]+)/.test(t.url)||!/^[\w|\W]{4,6}$/.test(t.password))}}o(115);var x=o(41),w={bilibili:{regex:/https?:\/\/www\.bilibili\.com\/video\/av([\w\W]+)/,embedUrl:"//player.bilibili.com/player.html?aid=<%= remote_id %>",html:"<iframe width='100%' height='400' scrolling='no' border='0' frameborder='no' framespacing='0' allowtransparency='true' allowfullscreen='true'></iframe>",id:t=>t[0].split("/")[0].split("?")[0]},bilih5:{regex:/https?:\/\/m\.bilibili\.com\/video\/av([\w\W]+)/,embedUrl:"//player.bilibili.com/player.html?aid=<%= remote_id %>",html:"<iframe width='100%' height='400' scrolling='no' border='0' frameborder='no' framespacing='0' allowtransparency='true' allowfullscreen='true'></iframe>",id:t=>t[0].split(".")[0].split("?")[0]}};class _{constructor({data:data,api:t}){this.api=t,this._data={},this.element=null,this.data=data}set data(data){if(!(data instanceof Object))throw new TypeError("Embed Tool data should be object");const{service:t,source:source,embed:embed,width:e,height:o,caption:caption=""}=data;this._data={service:t||this.data.service,source:source||this.data.source,embed:embed||this.data.embed,width:e||this.data.width,height:o||this.data.height,caption:caption||this.data.caption||""};const n=this.element;n&&n.parentNode.replaceChild(this.render(),n)}get data(){if(this.element){const caption=this.element.querySelector(`.${this.api.styles.input}`);this._data.caption=caption?caption.innerHTML:""}return this._data}get CSS(){return{baseClass:this.api.styles.block,input:this.api.styles.input,container:"embed-tool",containerLoading:"embed-tool--loading",preloader:"embed-tool__preloader",caption:"embed-tool__caption",url:"embed-tool__url",content:"embed-tool__content"}}render(){if(!this.data.service){const t=document.createElement("div");return this.element=t,t}const{html:html}=_.services[this.data.service],t=document.createElement("div"),caption=document.createElement("div"),template=document.createElement("template"),e=document.createElement("div"),o=this.createPreloader();t.classList.add(this.CSS.baseClass,this.CSS.container,this.CSS.containerLoading),caption.classList.add(this.CSS.input,this.CSS.caption),t.appendChild(o),caption.contentEditable=!0,caption.dataset.placeholder="Enter a caption",caption.innerHTML=this.data.caption||"",template.innerHTML=html,template.content.firstChild.setAttribute("src",this.data.embed),template.content.firstChild.classList.add(this.CSS.content);const n=this.embedIsReady(t);return e.classList.add("editor-video-wrap"),e.appendChild(template.content.firstChild),t.appendChild(e),t.appendChild(caption),n.then(()=>{t.classList.remove(this.CSS.containerLoading)}),this.element=t,t}createPreloader(){const t=document.createElement("preloader"),e=document.createElement("div");return e.textContent=this.data.source,t.classList.add(this.CSS.preloader),e.classList.add(this.CSS.url),t.appendChild(e),t}save(){return this.data}onPaste(t){const{key:e,data:o}=t.detail,{regex:n,embedUrl:r,width:d,height:l,id:c=(t=>t.shift())}=_.services[e],h=n.exec(o).slice(1),embed=r.replace(/<\%\= remote\_id \%\>/g,c(h));this.data={service:e,source:o,embed:embed,width:d,height:l}}static prepare({config:t={}}){const{services:e={}}=t;let o=Object.entries(w);const n=Object.entries(e).filter(([t,e])=>"boolean"==typeof e&&!0===e).map(([t])=>t),r=Object.entries(e).filter(([t,e])=>"object"==typeof e).filter(([t,e])=>_.checkServiceConfig(e)).map(([t,e])=>{const{regex:o,embedUrl:n,html:html,height:r,width:d,id:l}=e;return[t,{regex:o,embedUrl:n,html:html,height:r,width:d,id:l}]});n.length&&(o=o.filter(([t])=>n.includes(t))),o=o.concat(r),_.services=o.reduce((t,[e,o])=>e in t?(t[e]=Object.assign({},t[e],o),t):(t[e]=o,t),{}),_.patterns=o.reduce((t,[e,o])=>(t[e]=o.regex,t),{})}static checkServiceConfig(t){const{regex:e,embedUrl:o,html:html,height:n,width:r,id:d}=t;let l=e&&e instanceof RegExp&&o&&"string"==typeof o&&html&&"string"==typeof html;return l=l&&(void 0===d||d instanceof Function),l=l&&(void 0===n||Number.isFinite(n)),l=l&&(void 0===r||Number.isFinite(r)),l}static get pasteConfig(){return{patterns:_.patterns}}embedIsReady(t){let e=null;return new Promise((o,n)=>{e=new MutationObserver(Object(x.debounce)(450,o)),e.observe(t,{childList:!0,subtree:!0})}).then(()=>{e.disconnect()})}}o(117);class y{static get contentless(){return!0}constructor({data:data,config:t,api:e}){this.api=e,this._CSS={block:this.api.styles.block,wrapper:"ce-delimiter"},this._data={},this._element=this.drawView(),this.data=data}drawView(){const div=document.createElement("DIV");return div.classList.add(this._CSS.wrapper,this._CSS.block),div}render(){return this._element}save(t){return{}}static get toolbox(){return{icon:'<svg width="19" height="4" viewBox="0 0 19 4" xmlns="http://www.w3.org/2000/svg"><path d="M1.25 0H7a1.25 1.25 0 1 1 0 2.5H1.25a1.25 1.25 0 1 1 0-2.5zM11 0h5.75a1.25 1.25 0 0 1 0 2.5H11A1.25 1.25 0 0 1 11 0z"/></svg>',title:"分割线"}}}o(121),o(123);class S{static get enableLineBreaks(){return!0}static get toolbox(){return{icon:'<svg width="15" height="15" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 15a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15zm0-2.394a5.106 5.106 0 1 0 0-10.212 5.106 5.106 0 0 0 0 10.212zm-.675-4.665l2.708-2.708 1.392 1.392-2.708 2.708-1.392 1.391-2.971-2.971L5.245 6.36l1.58 1.58z"/></svg>',title:"进度表"}}constructor({data:data,config:t,api:e}){this._elements={wrapper:null,items:[]},this._data={items:[]},this.api=e,this.data=data}render(){if(this._elements.wrapper=this._make("div",[this.CSS.baseBlock,this.CSS.wrapper]),this._data.items.length)this._data.items.forEach(t=>{const e=this.createChecklistItem(t);this._elements.items.push(e),this._elements.wrapper.appendChild(e)});else{const t=this.createChecklistItem();this._elements.items.push(t),this._elements.wrapper.appendChild(t)}return this._elements.wrapper.addEventListener("keydown",t=>{const[e,o]=[13,8];switch(t.keyCode){case e:this.appendNewElement(t);break;case o:this.backspace(t)}},!1),this._elements.wrapper.addEventListener("click",t=>{this.toggleCheckbox(t)}),this._elements.wrapper}validate(t){return!!t.items.length}toggleCheckbox(t){const e=t.target.closest(`.${this.CSS.item}`);e.querySelector(`.${this.CSS.checkbox}`).contains(t.target)&&e.classList.toggle(this.CSS.itemChecked)}createChecklistItem(t={}){const e=this._make("div",this.CSS.item),o=this._make("span",this.CSS.checkbox),n=this._make("div",this.CSS.textField,{innerHTML:t.text?t.text:"",contentEditable:!0});return t.checked&&e.classList.add(this.CSS.itemChecked),e.appendChild(o),e.appendChild(n),e}appendNewElement(t){t.preventDefault();const e=window.getSelection().anchorNode,o=this._elements.items[this._elements.items.length-1].querySelector(`.${this.CSS.textField}`),n=o.innerHTML.replace("<br>"," ").trim();if(e===o&&!n)return this.api.blocks.insertNewBlock(),void t.stopPropagation();const r=this.createChecklistItem(),d=e.parentNode.closest(`.${this.CSS.item}`);this._elements.wrapper.insertBefore(r,d.nextSibling);const l=this._elements.items.indexOf(d)+1;this._elements.items.splice(l,0,r),this.moveCaretToEnd(r.querySelector(`.${this.CSS.textField}`))}backspace(t){const e=t.target.closest(`.${this.CSS.item}`),o=this._elements.items.indexOf(e),n=e.querySelector(`.${this.CSS.textField}`).innerHTML.replace("<br>"," ").trim();this._elements.items[0].querySelector(`.${this.CSS.textField}`).innerHTML.replace("<br>"," ").trim()&&o&&!n&&(t.preventDefault(),e.remove(),this._elements.items.splice(o,1),"undefined"!==this._elements.items[o-1]&&this.moveCaretToEnd(this._elements.items[o-1].querySelector(`.${this.CSS.textField}`)))}save(){return this.data}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-checklist",item:"cdx-checklist__item",itemChecked:"cdx-checklist__item--checked",checkbox:"cdx-checklist__item-checkbox",textField:"cdx-checklist__item-text"}}set data(t){this._data.items=t.items||[];const e=this._elements.wrapper;e&&e.parentNode.replaceChild(this.render(),e)}get data(){this._data.items=[];for(let i=0;i<this._elements.items.length;i++){const t=this._elements.items[i].querySelector(`.${this.CSS.textField}`).innerHTML.replace("<br>"," ").trim();t&&this._data.items.push({text:t,checked:this._elements.items[i].classList.contains(this.CSS.itemChecked)})}return this._data}_make(t,e=null,o={}){const n=document.createElement(t);Array.isArray(e)?n.classList.add(...e):e&&n.classList.add(e);for(const t in o)n[t]=o[t];return n}moveCaretToEnd(element){const t=document.createRange(),e=window.getSelection();t.selectNodeContents(element),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}}o(124);class C{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:data,config:t,api:e}){this.api=e,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.onKeyUp=this.onKeyUp.bind(this),this._placeholder=t.placeholder?t.placeholder:C.DEFAULT_PLACEHOLDER,this._data={},this._element=this.drawView(),/^<input /gi.test(data.text)&&(data={}),this.data=data}onKeyUp(t){if("Backspace"!==t.code&&"Delete"!==t.code)return;const{textContent:e}=this._element;""===e&&(this._element.innerHTML="")}drawView(){const div=document.createElement("DIV");return div.classList.add(this._CSS.wrapper,this._CSS.block),div.contentEditable=!0,div.dataset.placeholder=this._placeholder,div.addEventListener("keyup",this.onKeyUp),div}render(){return this._element}merge(data){this.data={text:this.data.text+data.text}}validate(t){return!(""===t.text.trim()||/vanced issues found/.test(t.text))}save(t){return{text:t.innerHTML}}onPaste(t){this.data={text:t.detail.data.innerHTML}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}get data(){return this._data.text=this._element.innerHTML,this._data}set data(data){this._data=data||{},this._element.innerHTML=this._data.text||""}static get pasteConfig(){return{tags:["P"]}}}o(126);class A{constructor({data:data,api:t}){this.data=data,this.api=t,this.i=0}static get toolbox(){return{title:"投票",icon:'<svg version="1" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 300 298" preserveAspectRatio="xMidYMid meet"><g stroke="none"><path d="M109.5 62.4l-2.5 2.5v140.2l2.5 2.4c2.3 2.4 3 2.5 14.7 2.5 6.8 0 13.3-.3 14.6-.6 5.2-1.4 5.2-.8 5.2-75.1 0-66.3-.1-68.9-2-71.3-1.8-2.4-2.3-2.5-15.9-2.8-13.9-.3-14.1-.3-16.6 2.2zM50.2 100l-2.2 2.1v103.8l2.6 2c2.4 1.9 4 2.1 15 2.1 13.8 0 16.8-.9 18.4-5.3 1.4-4.2 1.4-97.3-.1-101.6-.6-1.7-1.9-3.6-2.9-4.1-1-.6-7.9-1-15.2-1-12.1 0-13.6.2-15.6 2zM230.4 109.4c-1.7.8-3.4 2.1-3.8 3.1-.3.9-.6 22.1-.6 47.1v45.5l2.5 2.4c2.3 2.4 3 2.5 14.9 2.5 14 0 17-.9 18.6-5.3 1.5-4.3 1.4-86.3-.1-90.7-.8-2.2-2.2-3.7-4.5-4.6-4.4-1.8-22.7-1.8-27 0zM170.3 158.2c-1.2.6-2.7 2.4-3.2 4.1-1.4 3.9-1.4 38.5-.1 42.4 1.6 4.4 4.6 5.3 18.6 5.3 11.9 0 12.6-.1 14.9-2.5 2.5-2.4 2.5-2.4 2.5-24s0-21.6-2.5-24c-2.3-2.4-2.9-2.5-15.2-2.4-7 0-13.8.5-15 1.1zM49.2 223.2c-1.9 1.9-1.5 6.6.7 7.8 1.3.7 36 1 105.3 1 84.4 0 103.8-.2 105.2-1.3 2.2-1.6 2.5-6.5.5-7.8-2.3-1.4-210.3-1.1-211.7.3z"/></g></svg>'}}render(){if(document.querySelectorAll(".vote-wrap").length>0)return void this.api.notifier.show({message:"一篇文章只能包含一个投票",style:"error"});const t=document.createElement("div");t.classList.add("vote-wrap");const e=document.createElement("p");e.textContent="投票（文章发表后无法再修改）";const o=document.createElement("ul"),n=document.createElement("div");n.classList.add("vote-append","bili-font","ic_add");const r=text=>{const e=document.createElement("li"),label=document.createElement("span");label.textContent=`${++this.i}. `;const input=document.createElement("input");if(input.type="text",input.placeholder="请输入选项（20字以内）",text&&(input.value=("string"==typeof text?text:text.text)||""),input.maxLength=20,input.classList.add("vote-answer"),e.classList.add("vote-wrap-item"),e.appendChild(label),e.appendChild(input),this.i>2){const r=document.createElement("div");r.classList.add("bili-font","ic_input_close"),r.addEventListener("click",()=>{o.removeChild(e),this.i--,this.i<100&&(n.style.display="block");const r=t.querySelector(".vote-wrap-select-count");r&&(r.max=this.i,r.value-this.i>0&&(r.value=this.i))}),e.appendChild(r)}o.appendChild(e),input.focus()};n.addEventListener("click",()=>{r(),this.i>=100&&(n.style.display="none");const e=t.querySelector(".vote-wrap-select-count");e&&(e.max=this.i)});t.appendChild(e),t.appendChild(o);const d=document.createElement("div");return d.classList.add("append-btn-wrap"),d.appendChild(n),t.appendChild(d),this.data&&this.data.items?this.data.items.forEach(r):(r(),r()),(()=>{const footer=document.createElement("footer"),e=document.createElement("span");e.textContent="可选个数";const o=document.createElement("input");o.type="number",o.classList.add("vote-wrap-select-count"),o.min=1,this.data&&this.data.max_select?o.value=this.data.max_select:o.value=1,o.max=this.i;const n=document.createElement("div");n.classList.add("footer-item-wrap"),n.appendChild(e),n.appendChild(o),footer.appendChild(n);const r=document.createElement("span");r.textContent="截止时间（可选）";const d=document.createElement("input");d.type="date",d.min=new Date(Date.now()+864e5).toISOString().split("T")[0],d.classList.add("vote-expire-input"),this.data&&this.data.expired_at&&(d.value=new Date(1e3*this.data.expired_at).toISOString().split("T")[0]);const l=document.createElement("div");l.classList.add("footer-item-wrap"),l.appendChild(r),l.appendChild(d),footer.appendChild(l),t.appendChild(footer)})(),t}save(t){const e=t.querySelectorAll(".vote-answer"),o=[];[].forEach.call(e,(function(t){o.push(t.value)}));const n=t.querySelector(".vote-expire-input");return{items:o.map(t=>t.trim()).filter(t=>t),right_ids:[],max_select:+t.querySelector(".vote-wrap-select-count").value,expired_at:n&&n.value?parseInt(new Date(n.value).getTime()/1e3):0}}validate(t){return t.items.length>1}}var E={name:"JsonEditor",mixins:[f.a],props:{value:{required:!0,type:Array},slug:{type:String,default:""},time:{type:[String,Number],default:""},autofocus:{type:Boolean,default:!1}},data:()=>({editor:null}),mounted(){this.initEditor()},methods:{initEditor(){Promise.all([Promise.resolve().then(o.t.bind(null,43,7)),o.e(20).then(o.bind(null,156)),o.e(21).then(o.bind(null,136))]).then(t=>{const e=this;let data={};if(e.slug){const t=e.$cache.get(`editor_local_draft-${e.slug}`);data=t&&t.time>e.$utils.adjustDate(e.time).getTime()?t:{blocks:e.value,time:Date.now(),version:e.$cache.get("editor_version","2.16.1")}}else data=e.$cache.get("editor_local_draft-"),data&&e.$emit("input",data.blocks);const[o,n,r]=t.map(t=>t.default),d=new o({data:e.decodeData(data||{}),holder:"codex-editor",placeholder:"请输入内容",autofocus:!1,tools:{video:{class:_,inlineToolbar:!0},header:{class:v,inlineToolbar:!0},image:{class:n,types:"image/jpeg, image/png, image/jpg",config:{uploader:{uploadByFile:t=>new Promise((o,n)=>{const r=new FormData;r.append("file",t),r.append("token",e.imageUploadToken),Object(m.b)(e,r).then(data=>{data.url=`https://m1.calibur.tv/${data.url}`,o({success:1,file:data})}).catch(n)})}}},link:{class:r,config:{endpoint:"https://api.calibur.tv/v1/pin/editor/fetch_site"}},delimiter:{class:y},checklist:{class:S,inlineToolbar:!0},baidu:{class:k},paragraph:{class:C},vote:{class:A}},onChange:()=>{e.handleSave()}});d.isReady.then(()=>{this.editor=d,this.bindSaveEvent(),this.handleSave()}).catch(t=>{this.$toast.error(`编辑器初始化失败：${t}`)})})},bindSaveEvent(){document.addEventListener("keydown",t=>{83===t.keyCode&&(t.ctrlKey||t.metaKey)&&(t.stopPropagation(),t.preventDefault(),this.handleSave())},!1)},handleSave(){this.editor&&this.editor.save().then(t=>{const e=this.encodeData(t),o=`editor_local_draft-${this.slug||""}`;this.$cache.set(o,e),this.$cache.set("editor_version",e.version),this.value&&this.$emit("input",e.blocks),this.$emit("save")}).catch(()=>{this.$toast.error("保存失败")})},decodeData:({version:t,blocks:e,time:time})=>e?(e.forEach((t,o)=>{"music"===t.type&&(e[o].type="video")}),{version:t,blocks:e,time:time}):null,encodeData:({version:t,blocks:e,time:time})=>(e.forEach((t,o)=>{"video"===t.type&&t.data.service.startsWith("netease")&&(e[o].type="music",e[o].data.embed=e[o].data.embed.replace(/&amp;/g,"&"))}),{version:t,blocks:e,time:time})}},L=o(1);var T=Object(L.a)(E,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"editor-wrap"},[this._ssrNode('<div id="codex-editor" class="mousetrap"></div>')])}),[],!1,(function(t){var e=o(128);e.__inject__&&e.__inject__(t)}),null,"67049c40").exports,$=o(52),z={name:"WritePin",components:{VUploader:h.a,VField:l.a,VButton:r.a,Editor:T},mixins:[$.a,f.a],props:{},asyncData({app:t,error:e,query:o}){const n=o.slug;if(n)return t.$axios.$get("v1/pin/update/content",{params:{slug:n}}).then(data=>({...data})).catch(e)},data:()=>({slug:"",title:{banner:null,text:""},content:[],last_edit_at:"",published_at:"",loading:!1}),mounted(){this.$cache.has(`editor_local_draft_title-${this.slug}`)&&(this.title=this.$cache.get(`editor_local_draft_title-${this.slug}`))},methods:{customImageUploadSuccess(t,e){this.handleImageUploadSuccess(t,e);const o=t.data;if(o.width<960||o.height<540)return this.handleImageUploadRemove(e),void this.$toast.info("图片尺寸不符合要求");this.title.banner=o,this.saveTitle()},onEditorSave(){this.saveTitle()},saveTitle(){this.$cache.set(`editor_local_draft_title-${this.slug}`,this.title)},deleteBanner(){this.$refs.uploader.remove(0),this.saveTitle()},preValidate(){return!!this.loading||(this.title.text?this.content.length?(this.loading=!0,!1):(this.$toast.info("内容不能为空"),!0):(this.$toast.info("标题不能为空"),!0))},actionCreate(t){this.preValidate()||this.$axios.$post("v1/pin/create/story",{notebook:this.notebook,content:[{type:"title",data:this.title}].concat(this.content),publish:t}).then(t=>{this.removeCache(),window.location=this.$alias.pin(t)}).catch(t=>{this.$toast.error(t.message),this.loading=!1})},actionUpdate(t){if(this.preValidate())return;const{slug:e}=this;this.$axios.$post("v1/pin/update/story",{slug:e,notebook:this.notebook,content:[{type:"title",data:this.title}].concat(this.content),publish:t}).then(t=>{this.removeCache(),window.location=this.$alias.pin(t)}).catch(t=>{this.$toast.error(t.message),this.loading=!1})},actionRedo(){(this.content.length||this.title.text.length||this.title.banner)&&(this.removeCache(),this.$toast.success(this.slug?"撤销成功":"删除成功").then(()=>{window.location.reload()}))},removeCache(){this.$cache.del(`editor_local_draft_title-${this.slug}`),this.$cache.del(`editor_local_draft-${this.slug}`)},handleUploaderChange(){const t=this.$refs.uploader.images();this.title.banner=t.length?t[0]:null,this.saveTitle()}},head:{title:"投稿"}};var M=Object(L.a)(z,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"write-pin"}},[t._ssrNode('<div class="banner">',"</div>",[o("VUploader",{ref:"uploader",attrs:{cookie:!1,url:t.imageUploadAction,accept:t.imageUploadAccept,"transform-request":t.imageUploadRequest,"transform-response":t.imageUploadResponse},on:{change:t.handleUploaderChange},scopedSlots:t._u([{key:"action",fn:function(){return[t._v("\n        点击上传封面\n      ")]},proxy:!0},{key:"list",fn:function(){return[o("span")]},proxy:!0}])}),t._ssrNode(" "+(t.title&&t.title.banner?'<div class="image"'+t._ssrStyle(null,{backgroundImage:"url("+t.$resize(t.title.banner.url,{width:660})},null)+'></div> <div class="delete">\n        删除\n      </div>':"\x3c!----\x3e"))],2),t._ssrNode(" "),t._ssrNode('<div class="title">',"</div>",[o("VField",{attrs:{"min-row":1,"max-row":2,"max-len":40,counter:"",placeholder:"标题（建议30字以内）"},model:{value:t.title.text,callback:function(e){t.$set(t.title,"text",e)},expression:"title.text"}})],1),t._ssrNode(" "),o("Editor",{attrs:{slug:t.slug,time:t.last_edit_at},on:{save:t.onEditorSave},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._ssrNode(" "),t._ssrNode('<div class="footer">',"</div>",[o("VButton",[t._v("提交文章")]),t._ssrNode(" "),o("VButton",{attrs:{theme:"info"}},[t._v("\n      存草稿\n    ")])],2)],2)}),[],!1,(function(t){var e=o(130);e.__inject__&&e.__inject__(t)}),null,"5148599e");e.default=M.exports},44:function(t,e,o){var content=o(45);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals),o(3).default("2e3b382e",content,!0)},45:function(t,e,o){(e=o(2)(!1)).push([t.i,'.v-button{outline:none;-webkit-appearance:none;-webkit-tap-highlight-color:transparent;position:relative;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:0;cursor:default;border-radius:4px;border:1px solid;text-align:center}.v-button:not(:disabled):active{opacity:.8}.v-button--disabled{opacity:.4}.v-button .loading{position:absolute;left:50%;top:50%;display:block;border-radius:50%;-webkit-animation:rolling 1.4s linear infinite;animation:rolling 1.4s linear infinite;will-change:transform}.v-button .loading:before{content:"";position:absolute;top:0;left:0;width:50%;height:50%;border-radius:100% 0 0 0;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-transform-origin:right bottom;transform-origin:right bottom}.v-button .loading:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:75%;height:75%;border-radius:50%;margin:auto}.v-button--primary{background-color:#fb7299;border-color:#fb7299;color:#fff}.v-button--primary .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fff),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fff 20%,hsla(0,0%,100%,0) 70%)}.v-button--primary .loading:before{background-color:#fff}.v-button--primary .loading:after{background-color:#fb7299}body.night-mode .v-button--primary .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fff),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fff 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--primary .loading:before{background-color:#fff}body.night-mode .v-button--primary .loading:after{background-color:#eb7093}body.night-mode .v-button--primary{background-color:#eb7093;border-color:#eb7093}.v-button--primary.v-button--plain{background-color:transparent;border-color:#fb7299;color:#fb7299}body.night-mode .v-button--primary.v-button--plain{background-color:transparent;border-color:#eb7093;color:#eb7093}.v-button--primary.v-button--text{background-color:transparent;border-color:transparent;color:#fb7299}body.night-mode .v-button--primary.v-button--text{background-color:transparent;border-color:transparent;color:#eb7093}.v-button--primary.v-button--loading{color:transparent!important}.v-button--primary.v-button--loading.v-button--plain .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fb7299),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fb7299 20%,hsla(0,0%,100%,0) 70%)}.v-button--primary.v-button--loading.v-button--plain .loading:before{background-color:#fb7299}.v-button--primary.v-button--loading.v-button--plain .loading:after{background-color:#fff}body.night-mode .v-button--primary.v-button--loading.v-button--plain .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fb7299),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fb7299 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--primary.v-button--loading.v-button--plain .loading:before{background-color:#fb7299}body.night-mode .v-button--primary.v-button--loading.v-button--plain .loading:after{background-color:#141414}.v-button--primary.v-button--loading.v-button--text .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fb7299),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fb7299 20%,hsla(0,0%,100%,0) 70%)}.v-button--primary.v-button--loading.v-button--text .loading:before{background-color:#fb7299}.v-button--primary.v-button--loading.v-button--text .loading:after{background-color:#fff}body.night-mode .v-button--primary.v-button--loading.v-button--text .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fb7299),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fb7299 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--primary.v-button--loading.v-button--text .loading:before{background-color:#fb7299}body.night-mode .v-button--primary.v-button--loading.v-button--text .loading:after{background-color:#141414}.v-button--warning{background-color:#faab4b;border-color:#faab4b;color:#fff}.v-button--warning .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fff),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fff 20%,hsla(0,0%,100%,0) 70%)}.v-button--warning .loading:before{background-color:#fff}.v-button--warning .loading:after{background-color:#faab4b}body.night-mode .v-button--warning .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fff),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fff 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--warning .loading:before{background-color:#fff}body.night-mode .v-button--warning .loading:after{background-color:#e7a24e}body.night-mode .v-button--warning{background-color:#e7a24e;border-color:#e7a24e}.v-button--warning.v-button--plain{background-color:transparent;border-color:#faab4b;color:#faab4b}body.night-mode .v-button--warning.v-button--plain{background-color:transparent;border-color:#e7a24e;color:#e7a24e}.v-button--warning.v-button--text{background-color:transparent;border-color:transparent;color:#faab4b}body.night-mode .v-button--warning.v-button--text{background-color:transparent;border-color:transparent;color:#e7a24e}.v-button--warning.v-button--loading{color:transparent!important}.v-button--warning.v-button--loading.v-button--plain .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#faab4b),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#faab4b 20%,hsla(0,0%,100%,0) 70%)}.v-button--warning.v-button--loading.v-button--plain .loading:before{background-color:#faab4b}.v-button--warning.v-button--loading.v-button--plain .loading:after{background-color:#fff}body.night-mode .v-button--warning.v-button--loading.v-button--plain .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#faab4b),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#faab4b 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--warning.v-button--loading.v-button--plain .loading:before{background-color:#faab4b}body.night-mode .v-button--warning.v-button--loading.v-button--plain .loading:after{background-color:#141414}.v-button--warning.v-button--loading.v-button--text .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#faab4b),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#faab4b 20%,hsla(0,0%,100%,0) 70%)}.v-button--warning.v-button--loading.v-button--text .loading:before{background-color:#faab4b}.v-button--warning.v-button--loading.v-button--text .loading:after{background-color:#fff}body.night-mode .v-button--warning.v-button--loading.v-button--text .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#faab4b),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#faab4b 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--warning.v-button--loading.v-button--text .loading:before{background-color:#faab4b}body.night-mode .v-button--warning.v-button--loading.v-button--text .loading:after{background-color:#141414}.v-button--danger{background-color:#fa5a57;border-color:#fa5a57;color:#fff}.v-button--danger .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fff),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fff 20%,hsla(0,0%,100%,0) 70%)}.v-button--danger .loading:before{background-color:#fff}.v-button--danger .loading:after{background-color:#fa5a57}body.night-mode .v-button--danger .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fff),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fff 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--danger .loading:before{background-color:#fff}body.night-mode .v-button--danger .loading:after{background-color:#e85b59}body.night-mode .v-button--danger{background-color:#e85b59;border-color:#e85b59}.v-button--danger.v-button--plain{background-color:transparent;border-color:#fa5a57;color:#fa5a57}body.night-mode .v-button--danger.v-button--plain{background-color:transparent;border-color:#e85b59;color:#e85b59}.v-button--danger.v-button--text{background-color:transparent;border-color:transparent;color:#fa5a57}body.night-mode .v-button--danger.v-button--text{background-color:transparent;border-color:transparent;color:#e85b59}.v-button--danger.v-button--loading{color:transparent!important}.v-button--danger.v-button--loading.v-button--plain .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fa5a57),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fa5a57 20%,hsla(0,0%,100%,0) 70%)}.v-button--danger.v-button--loading.v-button--plain .loading:before{background-color:#fa5a57}.v-button--danger.v-button--loading.v-button--plain .loading:after{background-color:#fff}body.night-mode .v-button--danger.v-button--loading.v-button--plain .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fa5a57),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fa5a57 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--danger.v-button--loading.v-button--plain .loading:before{background-color:#fa5a57}body.night-mode .v-button--danger.v-button--loading.v-button--plain .loading:after{background-color:#141414}.v-button--danger.v-button--loading.v-button--text .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fa5a57),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fa5a57 20%,hsla(0,0%,100%,0) 70%)}.v-button--danger.v-button--loading.v-button--text .loading:before{background-color:#fa5a57}.v-button--danger.v-button--loading.v-button--text .loading:after{background-color:#fff}body.night-mode .v-button--danger.v-button--loading.v-button--text .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fa5a57),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fa5a57 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--danger.v-button--loading.v-button--text .loading:before{background-color:#fa5a57}body.night-mode .v-button--danger.v-button--loading.v-button--text .loading:after{background-color:#141414}.v-button--success{background-color:#6dc781;border-color:#6dc781;color:#fff}.v-button--success .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fff),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fff 20%,hsla(0,0%,100%,0) 70%)}.v-button--success .loading:before{background-color:#fff}.v-button--success .loading:after{background-color:#6dc781}body.night-mode .v-button--success .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#fff),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fff 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--success .loading:before{background-color:#fff}body.night-mode .v-button--success .loading:after{background-color:#6cb97d}body.night-mode .v-button--success{background-color:#6cb97d;border-color:#6cb97d}.v-button--success.v-button--plain{background-color:transparent;border-color:#6dc781;color:#6dc781}body.night-mode .v-button--success.v-button--plain{background-color:transparent;border-color:#6cb97d;color:#6cb97d}.v-button--success.v-button--text{background-color:transparent;border-color:transparent;color:#6dc781}body.night-mode .v-button--success.v-button--text{background-color:transparent;border-color:transparent;color:#6cb97d}.v-button--success.v-button--loading{color:transparent!important}.v-button--success.v-button--loading.v-button--plain .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#6dc781),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#6dc781 20%,hsla(0,0%,100%,0) 70%)}.v-button--success.v-button--loading.v-button--plain .loading:before{background-color:#6dc781}.v-button--success.v-button--loading.v-button--plain .loading:after{background-color:#fff}body.night-mode .v-button--success.v-button--loading.v-button--plain .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#6dc781),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#6dc781 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--success.v-button--loading.v-button--plain .loading:before{background-color:#6dc781}body.night-mode .v-button--success.v-button--loading.v-button--plain .loading:after{background-color:#141414}.v-button--success.v-button--loading.v-button--text .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#6dc781),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#6dc781 20%,hsla(0,0%,100%,0) 70%)}.v-button--success.v-button--loading.v-button--text .loading:before{background-color:#6dc781}.v-button--success.v-button--loading.v-button--text .loading:after{background-color:#fff}body.night-mode .v-button--success.v-button--loading.v-button--text .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#6dc781),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#6dc781 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--success.v-button--loading.v-button--text .loading:before{background-color:#6dc781}body.night-mode .v-button--success.v-button--loading.v-button--text .loading:after{background-color:#141414}.v-button--info{background-color:#e7e7e7;border-color:#e7e7e7;color:#999}.v-button--info .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#999),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#999 20%,hsla(0,0%,100%,0) 70%)}.v-button--info .loading:before{background-color:#999}.v-button--info .loading:after{background-color:#e7e7e7}body.night-mode .v-button--info .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#999),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#999 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--info .loading:before{background-color:#999}body.night-mode .v-button--info .loading:after{background-color:#2a2a2a}body.night-mode .v-button--info{background-color:#2a2a2a;border-color:#2a2a2a}.v-button--info.v-button--plain{background-color:transparent;border-color:silver;color:#999}body.night-mode .v-button--info.v-button--plain{background-color:transparent;border-color:#4e4e4e;color:#727272}.v-button--info.v-button--text{background-color:transparent;border-color:transparent;color:#999}body.night-mode .v-button--info.v-button--text{background-color:transparent;border-color:transparent;color:#727272}.v-button--info.v-button--loading{color:transparent!important}.v-button--info.v-button--loading.v-button--plain .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#e7e7e7),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#e7e7e7 20%,hsla(0,0%,100%,0) 70%)}.v-button--info.v-button--loading.v-button--plain .loading:before{background-color:#e7e7e7}.v-button--info.v-button--loading.v-button--plain .loading:after{background-color:#999}body.night-mode .v-button--info.v-button--loading.v-button--plain .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#e7e7e7),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#e7e7e7 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--info.v-button--loading.v-button--plain .loading:before{background-color:#e7e7e7}body.night-mode .v-button--info.v-button--loading.v-button--plain .loading:after{background-color:#727272}.v-button--info.v-button--loading.v-button--text .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#e7e7e7),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#e7e7e7 20%,hsla(0,0%,100%,0) 70%)}.v-button--info.v-button--loading.v-button--text .loading:before{background-color:#e7e7e7}.v-button--info.v-button--loading.v-button--text .loading:after{background-color:#999}body.night-mode .v-button--info.v-button--loading.v-button--text .loading{background:-webkit-gradient(linear,left top,right top,color-stop(20%,#e7e7e7),color-stop(70%,hsla(0,0%,100%,0)));background:linear-gradient(90deg,#e7e7e7 20%,hsla(0,0%,100%,0) 70%)}body.night-mode .v-button--info.v-button--loading.v-button--text .loading:before{background-color:#e7e7e7}body.night-mode .v-button--info.v-button--loading.v-button--text .loading:after{background-color:#727272}.v-button--small{padding:2px 12px;font-size:13px}.v-button--small .loading{width:13px;height:13px;margin-left:-6.5px;margin-top:-6.5px}.v-button--medium{padding:4px 11px;font-size:14px}.v-button--medium .loading{width:14px;height:14px;margin-left:-7px;margin-top:-7px}.v-button--large{padding:10px 38px;font-size:16px}.v-button--large .loading{width:16px;height:16px;margin-left:-8px;margin-top:-8px}.v-button--block{display:block;width:100%}',""]),t.exports=e},46:function(t,e,o){var content=o(47);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals),o(3).default("4bdd0704",content,!0)},47:function(t,e,o){(e=o(2)(!1)).push([t.i,'.v-field__input input,.v-field__input textarea{border:none;outline:none;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.v-field{min-height:44px;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:end;align-items:flex-end;overflow:hidden;background-color:#fff}body.night-mode .v-field{background-color:#141414}.v-field__before--line{padding-right:12px}.v-field__before--line:before{right:0}.v-field__after--line,.v-field__before--has{padding-left:12px}.v-field__after--line:before{left:0}.v-field__after--has{padding-right:12px}.v-field__after,.v-field__before{font-size:14px;height:100%;line-height:44px;flex-shrink:0;color:#212121}body.night-mode .v-field__after,body.night-mode .v-field__before{color:#e1e1e1}.v-field__after--line,.v-field__before--line{position:relative}.v-field__after--line:before,.v-field__before--line:before{content:"";position:absolute;top:9px;width:1px;height:26px;-webkit-transform:scaleX(.5);transform:scaleX(.5);background-color:#e7e7e7}body.night-mode .v-field__after--line:before,body.night-mode .v-field__before--line:before{background-color:#2a2a2a}.v-field__main{-webkit-box-flex:1;flex:1;height:100%}.v-field__cancel{float:right;height:100%}.v-field__cancel i{display:block;height:100%;line-height:44px;margin-left:12px;margin-right:12px;font-size:16px;color:#999}body.night-mode .v-field__cancel i{color:#727272}.v-field__input{overflow:hidden;height:100%}.v-field__input input,.v-field__input textarea{display:block;width:100%;line-height:20px;font-size:14px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background-color:transparent;color:#212121;caret-color:#fb7299}body.night-mode .v-field__input input,body.night-mode .v-field__input textarea{color:#e1e1e1;caret-color:#eb7093}.v-field__input input::-webkit-input-placeholder,.v-field__input textarea::-webkit-input-placeholder{color:silver}.v-field__input input::-moz-placeholder,.v-field__input textarea::-moz-placeholder{color:silver}.v-field__input input:-ms-input-placeholder,.v-field__input textarea:-ms-input-placeholder{color:silver}.v-field__input input::-ms-input-placeholder,.v-field__input textarea::-ms-input-placeholder{color:silver}.v-field__input input::placeholder,.v-field__input textarea::placeholder{color:silver}body.night-mode .v-field__input input::-webkit-input-placeholder,body.night-mode .v-field__input textarea::-webkit-input-placeholder{color:#4e4e4e}body.night-mode .v-field__input input::-moz-placeholder,body.night-mode .v-field__input textarea::-moz-placeholder{color:#4e4e4e}body.night-mode .v-field__input input:-ms-input-placeholder,body.night-mode .v-field__input textarea:-ms-input-placeholder{color:#4e4e4e}body.night-mode .v-field__input input::-ms-input-placeholder,body.night-mode .v-field__input textarea::-ms-input-placeholder{color:#4e4e4e}body.night-mode .v-field__input input::placeholder,body.night-mode .v-field__input textarea::placeholder{color:#4e4e4e}.v-field__input input{padding:12px;height:44px}.v-field__input textarea{resize:none;min-height:44px;padding:0 12px}.v-field__input--close input{padding-right:0}.v-field__input--error input,.v-field__input--error textarea{color:#fa5a57}body.night-mode .v-field__input--error input,body.night-mode .v-field__input--error textarea{color:#e85b59}.v-field__textarea{padding:12px 0}.v-field__textarea--auto{position:relative}.v-field__textarea--auto pre{width:100%;height:100%;padding:0 12px;line-height:20px;min-height:20px;opacity:0;word-break:break-all;white-space:pre-wrap;word-wrap:break-word;letter-spacing:normal;word-spacing:normal;pointer-events:none;font-size:14px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.v-field__textarea--auto textarea{position:absolute;top:0;left:0;right:0;bottom:0}.v-field__counter{text-align:right;padding-right:12px;font-size:13px;line-height:13px;margin-top:4px;margin-bottom:-8px;color:#999}body.night-mode .v-field__counter{color:#727272}',""]),t.exports=e},48:function(t,e,o){"use strict";var n=o(49);e.a={data:()=>({imageUploadToken:"",imageUploadAccept:["jpeg","png","jpg"],imageUploadAction:"https://upload.qiniup.com",imagePrefix:"https://m1.calibur.tv/"}),computed:{currentUser(){return this.$store.state.user},isAuth(){return this.$store.state.isAuth}},mounted(){this.isAuth?this.initUpToken():this.$channel.$when("user-signed",()=>{this.initUpToken()})},beforeDestroy(){this.getUpTokenTimer&&clearInterval(this.getUpTokenTimer)},methods:{initUpToken(){this.getUpToken(),this.getUpTokenTimer=setInterval(()=>{this.getUpToken()},18e5)},async getUpToken(){this.imageUploadToken=await Object(n.a)(this)},imageUploadRequest(data){return data.key=(({slug:t,file:e})=>`${t}/${(new Date).getTime()}-${Math.random().toString(36).substring(3,6)}.${e.type.split("/").pop()}`)({slug:this.currentUser.slug,file:data.file}),data.token=this.imageUploadToken,data},imageUploadResponse(t){try{return{...t.data,url:`${this.imagePrefix}${t.data.url}`}}catch(t){return{}}}}}},49:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"b",(function(){return r}));const n=t=>t.$axios.$get("v1/image/uptoken"),r=(t,e)=>t.$axios.$post("https://up.qbox.me",e,{"Content-Type":"multipart/form-data"})},50:function(t,e,o){var content=o(51);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals),o(3).default("7c8f9b2e",content,!0)},51:function(t,e,o){(e=o(2)(!1)).push([t.i,'.v-uploader{font-size:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-uploader--custom{font-size:inherit}.v-uploader__action{display:inline-block;position:relative;overflow:hidden}.v-uploader__action input[type=file]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0}.v-uploader__action__wrap{pointer-events:none;display:inline}.v-uploader__btn{position:relative;display:inline-block;width:80px;height:80px;border-radius:4px;background-color:#fff;border:1px dashed #e5e5e5}body.night-mode .v-uploader__btn{background-color:#141414;border-color:#2c2c2c}.v-uploader__btn .ic_add{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:24px;color:#969799}body.night-mode .v-uploader__btn .ic_add{color:#8f8f91}.v-uploader__files+.v-uploader__action,.v-uploader__item{margin:0 8px 8px 0}.v-uploader__item{position:relative;display:inline-block;width:80px;height:80px;background-color:#f4f4f4}body.night-mode .v-uploader__item{background-color:#1f1f1f}.v-uploader__item__poster{display:block;-o-object-fit:cover;object-fit:cover;width:100%;height:100%;border-radius:4px}.v-uploader__item__cancel{position:absolute;top:-8px;right:-8px;display:block;width:18px;height:18px;font-size:18px;line-height:18px;text-align:center;border-radius:50%;z-index:1;color:#969799;background-color:#fff}body.night-mode .v-uploader__item__cancel{color:#8f8f91;background-color:#141414}.v-uploader__item__mask{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);border-radius:4px}.v-uploader__item__mask span{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#fff;font-size:12px;text-align:center;width:100%}.v-uploader__item__loading div{position:absolute;left:50%;top:50%;margin-left:-10px;margin-top:-10px;width:20px;height:20px;border-radius:50%;-webkit-animation:skr 1.5s linear infinite;animation:skr 1.5s linear infinite;border:2px solid #fff;box-shadow:0 0 5px #fff}@keyframes skr{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes skr{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}.v-uploader__item__status{position:absolute;right:0;bottom:0;width:40px;height:40px;border-radius:4px;overflow:hidden}.v-uploader__item__status:before{content:"";position:absolute;left:20px;top:20px;width:100%;height:100%;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.v-uploader__item__status.is-success:before{background-color:#6dc781}body.night-mode .v-uploader__item__status.is-success:before{background-color:#6cb97d}.v-uploader__item__status.is-error:before{background-color:#fa5a57}body.night-mode .v-uploader__item__status.is-error:before{background-color:#e85b59}.v-uploader__item__status .bili-font{position:absolute;display:block;font-size:14px;width:14px;height:14px;right:2px;bottom:2px;color:#fff;text-align:center}',""]),t.exports=e},52:function(t,e,o){"use strict";e.a={beforeMount(){this.$channel.$when("user-not-sign",()=>{this.$toast.error("继续操作前请先登录").then(()=>{this.$bridge.redirectTo({url:`/pages/user/login/index?from=${encodeURIComponent(window.location.href)}`})})})}}},73:function(t,e,o){var content=o(129);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=o(3).default;t.exports.__inject__=function(t){n("5f81af62",content,!0,t)}},74:function(t,e,o){var content=o(131);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=o(3).default;t.exports.__inject__=function(t){n("6b8266a3",content,!0,t)}}};
//# sourceMappingURL=809fa648b9e34c22ae92.js.map