exports.ids=[9],exports.modules={100:function(t,e,n){"use strict";n.r(e);var l=n(64),r=n.n(l);for(var o in l)"default"!==o&&function(t){n.d(e,t,(function(){return l[t]}))}(o);e.default=r.a},157:function(t,e,n){"use strict";n.r(e);n(54),n(18);var l=n(35),r=n.n(l),o=(n(48),n(32)),h=n.n(o),c=(n(51),n(33)),m={name:"CreateBangumiQuestion",components:{VForm:n.n(c).a,VField:h.a,VRadio:r.a},data:()=>({bangumi:null,loading:!1,title:"",answers:[{value:"",key:0},{value:"",key:1},{value:"",key:2},{value:"",key:3}],rightOpt:-1,rule:null}),computed:{slug(){return this.$route.query.slug},rightAnswerOpts(){const t=["A","B","C","D"];return this.answers.map((e,n)=>({label:t[n],value:e.key}))}},mounted(){this.getBangumi(),this.getRule()},methods:{getBangumi(){this.$axios.$get("v1/bangumi/show",{params:{slug:this.slug}}).then(t=>{this.bangumi=t}).catch(()=>{})},getRule(){this.$axios.$get("v1/join/rule/show",{params:{slug:this.slug}}).then(data=>{this.rule=data}).catch()},handleSubmit(){this.title.trim()?this.answers.map(t=>t.value).filter(t=>t).length<2?this.$toast.info("至少要有2个选项"):-1!==this.rightOpt?this.answers.filter(t=>t.key===this.rightOpt)[0].value.trim()?(this.loading=!0,this.$axios.$post("v1/join/create",{title:this.title,answers:this.answers.map(t=>t.value).filter(t=>t),right_index:this.rightOpt,bangumi_slug:this.slug}).then(()=>{this.$toast.success("提交成功"),this.title="",this.answers=[{value:"",key:0},{value:"",key:1},{value:"",key:2},{value:"",key:3}],this.rightOpt=-1}).catch(t=>{this.$toast.error(t.message),this.loading=!1})):this.$toast.info("正确选项不能为空"):this.$toast.info("请选择正确选项"):this.$toast.info("题目不能为空")}},head:()=>({title:"添加题目"})},v=n(1);var component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.bangumi?n("VForm",{attrs:{id:"create-bangumi-question",full:"",loading:t.loading},on:{submit:t.handleSubmit}},[n("h2",{staticClass:"title"},[t._v("\n    为《"+t._s(t.bangumi.name)+"》出题\n  ")]),t._v(" "),n("br"),t._v(" "),n("p",{staticClass:"form-tip"},[t._v("\n    题目提交完，需要审核通过之后才会入库\n  ")]),t._v(" "),n("VField",{attrs:{"min-row":2,"max-len":50,placeholder:"请输入题目",label:"题目"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),n("p",{staticClass:"form-tip"},[t._v("\n    提示：选项至少提供两个，至多四个\n  ")]),t._v(" "),t._l(t.answers,(function(e,l){return n("VField",{key:e.key,attrs:{label:"选项"+(l+1),placeholder:"请输入答案（20字以内）","max-len":20},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}})})),t._v(" "),n("VField",{attrs:{label:"答案（题目为单选题，正确选项不能为空）"}},[n("VRadio",{attrs:{inline:"",label:t.rightAnswerOpts},model:{value:t.rightOpt,callback:function(e){t.rightOpt=e},expression:"rightOpt"}})],1)],2):t._e()}),[],!1,(function(t){var e=n(100);e.__inject__&&e.__inject__(t)}),null,"675e3fac");e.default=component.exports},48:function(t,e){t.exports={}},51:function(t,e){t.exports={}},54:function(t,e){t.exports={}},64:function(t,e){t.exports={}}};