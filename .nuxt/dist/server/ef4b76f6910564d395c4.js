exports.ids=[4],exports.modules={111:function(e,t,r){"use strict";r.r(t);var n=r(72),l=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=l.a},162:function(e,t,r){"use strict";r.r(t);r(51),r(11);var n=r(30),l={name:"TrialPinItem",components:{VButton:r.n(n).a},props:{item:{type:Object,required:!0},extra:{type:Object,required:!0}},data(){return{words_1:[...this.extra.filter.words_1],words_2:[...this.extra.filter.words_2],loading:!1}},mounted(){this.$channel.$on("delete-words",data=>{this[`words_${data.level}`].forEach((e,t)=>{e===data.words&&this[`words_${data.level}`].splice(t,1)})})},methods:{deleteWords(e,t){this.$alert({title:"确认要删除吗？",message:`${t}级敏感词：${e}`,buttons:["取消","确认"],callback:r=>{r&&this.$axios.$post("v1/console/trial/words/delete",{filename:`words_level_${t}`,words:[e]}).then(()=>{this.$channel.$emit("delete-words",{level:t,words:e})}).catch(e=>{this.$toast.info(e.message)})}})},clickUser(){this.$bridge.navigateTo({url:`/pages/user/show/index?slug=${this.item.author.slug}`})},clickBangumi(){this.$bridge.navigateTo({url:`/pages/bangumi/show/index?slug=${this.item.bangumi.slug}`})},handleDelete(){this.loading||this.$alert({title:"确认要删帖吗？",buttons:["取消","确认"],callback:e=>{e&&(this.loading=!0,this.$axios.$post("v1/pin/delete",{slug:this.item.slug}).then(()=>{this.$emit("delete",this.item.slug),this.$toast.info("删除成功")}).catch(e=>{this.loading=!1,this.$toast.error(e.message)}))}})},handlePass(){this.loading||(this.loading=!0,this.$axios.$post("v1/pin/pass",{slug:this.item.slug}).then(()=>{this.$emit("delete",this.item.slug),this.$toast.info("通过成功")}).catch(e=>{this.loading=!1,this.$toast.error(e.message)}))}}},o=r(1);var d={name:"TrialPin",components:{TrialPinItem:Object(o.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"trial-pin-item"},[e._ssrNode('<div class="header"><div class="user"><img'+e._ssrAttr("src",e.$resizeImage(e.item.author.avatar,{width:40}))+'> <div class="name"><p class="nickname oneline">'+e._s(e.item.author.nickname)+'</p> <p class="bangumi oneline">'+e._s(e.item.bangumi.name)+'</p></div></div> <span class="time">'+e._ssrEscape(e._s(e.$utils.timeAgo(e.item.published_at)))+'</span></div> <div class="content">'+e._s(e.extra.filter.text)+"</div> "+(e.extra.images.length?'<div class="images">'+e._ssrList(e.extra.images,(function(image,t){return"<img"+e._ssrAttr("src",e.$resizeImage(image,{height:150,rule:0}))+">"}))+' <div class="total">'+e._ssrEscape("\n      "+e._s(e.extra.images.length)+" 张\n    ")+"</div></div>":"\x3c!----\x3e")+" "),e._ssrNode('<div class="footer">',"</div>",[e.words_1.length?e._ssrNode("<div>","</div>",[e._ssrNode('<span class="sub_title">一级敏感词命中：</span> '),e._l(e.words_1,(function(t){return r("VButton",{key:t,attrs:{size:"small",plain:"",theme:"warning"},domProps:{textContent:e._s(t)},on:{click:function(r){return e.deleteWords(t,1)}}})}))],2):e._e(),e._ssrNode(" "),e.words_2.length?e._ssrNode("<div>","</div>",[e._ssrNode('<span class="sub_title">二级敏感词命中：</span> '),e._l(e.words_2,(function(t){return r("VButton",{key:t,attrs:{size:"small",plain:"",theme:"danger"},domProps:{textContent:e._s(t)},on:{click:function(r){return e.deleteWords(t,2)}}})}))],2):e._e()],2),e._ssrNode(" "),e._ssrNode('<div class="control">',"</div>",[r("VButton",{attrs:{loading:e.loading,block:"",size:"small",theme:"info"},on:{click:e.handleDelete}},[e._v("\n      删除\n    ")]),e._ssrNode(" "),r("VButton",{attrs:{loading:e.loading,block:"",size:"small"},on:{click:e.handlePass}},[e._v("\n      通过\n    ")])],2)],2)}),[],!1,(function(e){var t=r(111);t.__inject__&&t.__inject__(e)}),null,"9a52c4bc").exports},computed:{query(){return{...this.$route.query,$axios:this.$axios,status:0,changing:"slug"}},source(){return this.$store.getters["flow/getFlow"]({func:"getTrialPinList",type:"page",query:this.query})}},methods:{handleDelete(e){this.$refs.loader.delete(e),0===this.source.result.length&&this.$refs.loader.refresh()}}};var c=Object(o.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"trial-pin"}},[r("FlowLoader",{ref:"loader",attrs:{func:"getTrialPinList",type:"page",query:e.query},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.flow,l=t.extra;return r("div",{},e._l(n,(function(t){return r("TrialPinItem",{key:t.slug,attrs:{item:t,extra:l[t.slug]},on:{delete:e.handleDelete}})})),1)}},{key:"error",fn:function(t){var r=t.error;return[e._v("\n      "+e._s(r.message)+"\n    ")]}}])})],1)}),[],!1,(function(e){}),null,"d3aff82c");t.default=c.exports},51:function(e,t){e.exports={}},72:function(e,t){e.exports={}}};