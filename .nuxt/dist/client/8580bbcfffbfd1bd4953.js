(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{241:function(e,t,n){e.exports={"qa-item":"qa-item_3N5Xs",qaItem:"qa-item_3N5Xs",header:"header_AMObU",order:"order_2Lrmw",title:"title_-CJOD",main:"main_2bbkH",answer:"answer_12nXM","is-right":"is-right_2Bjlo",isRight:"is-right_2Bjlo","is-selected":"is-selected_1s5R_",isSelected:"is-selected_1s5R_",footer:"footer_3zt4D",intro:"intro_1Z2UY",control:"control_3tb4E"}},256:function(e,t,n){"use strict";var r=n(241),o=n.n(r);t.default=o.a},257:function(e,t,n){},294:function(e,t,n){"use strict";n(255),n(56),n(10),n(76),n(223),n(43);var r=n(224),o=n.n(r),l=(n(221),n(222)),c={name:"QaItem",components:{VButton:n.n(l).a,VField:o.a},props:{item:{type:Object,required:!0},order:{type:Number,required:!0},isTrial:{type:Boolean,default:!1},extra:{type:Object,default:function(){}}},data:function(){var e=this;return{rightAnswer:function(){for(var t=e.item.id.toString(),n=e.extra.answers||{},r="",o=Object.keys(n),i=0;i<o.length;i++)if(o[i].toString()===t){r=n[o[i]];break}return r}(),title:this.item.title,loading:!1}},methods:{changeRightAnswer:function(e){this.isTrial&&(this.rightAnswer=e)},answerNumber:function(e){return["A","B","C","D"][e]},handleAnswerClick:function(e){this.isTrial||(this.rightAnswer=e,this.$emit("select",{questionId:this.item.id,answerId:e}))},handleUserClick:function(){this.$bridge.navigateTo({url:"/pages/user/show/index?slug=".concat(this.item.user.slug)})},handleBangumiClick:function(){this.$bridge.navigateTo({url:"/pages/bangumi/show/index?slug=".concat(this.item.bangumi.slug)})},handleDelete:function(){var e=this;this.loading||this.$alert({title:"提示",message:"删除后不可恢复，确认要删除吗？",buttons:["取消","确定"],callback:function(t){t&&(e.loading=!0,e.$axios.$post("v1/join/delete",{id:e.item.id}).then((function(){e.$toast.success("删除成功"),e.$emit("delete",e.item.id)})).catch((function(t){e.$toast.error(t.message)})).finally((function(){e.loading=!1})))}})},handlePass:function(){var e=this;!this.loading&&this.title&&(this.loading=!0,this.$axios.$post("v1/join/recommend",{id:this.item.id,right_id:this.rightAnswer,title:this.title}).then((function(){e.$toast.success("入库成功"),e.$emit("delete",e.item.id)})).catch((function(t){e.$toast.error(t.message)})).finally((function(){e.loading=!1})))}}},d=n(256),h=n(34);var component=Object(h.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.qaItem},[n("div",{class:e.$style.header},[e.isTrial?n("VField",{class:e.$style.title,attrs:{"min-row":1,"max-row":3,"max-len":50,close:!1,label:""+e.order},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}):[n("div",{class:e.$style.order,domProps:{textContent:e._s(e.order)}}),e._v(" "),n("p",{class:e.$style.title,domProps:{innerHTML:e._s(e.title)}})]],2),e._v(" "),n("div",{class:e.$style.main},e._l(e.item.answers,(function(t,r,o){var l,c;return n("div",{key:r,class:[e.$style.answer,(l={},l[e.$style.isSelected]=!e.isTrial&&r===e.rightAnswer,l)],on:{click:function(t){return e.handleAnswerClick(r)}}},[n("div",{class:[e.$style.order,(c={},c[e.$style.isRight]=e.isTrial&&r===e.rightAnswer,c)],domProps:{textContent:e._s(e.answerNumber(o))},on:{click:function(t){return e.changeRightAnswer(r)}}}),e._v(" "),n("p",{domProps:{innerHTML:e._s(t)}})])})),0),e._v(" "),n("div",{class:e.$style.footer},[n("div",{class:e.$style.intro},[n("div",{staticClass:"oneline"},[n("span",[e._v("出题人：")]),e._v(" "),n("span",{domProps:{textContent:e._s(e.item.user.nickname)},on:{click:e.handleUserClick}})]),e._v(" "),e.isTrial?n("div",{staticClass:"oneline"},[n("span",[e._v("番の剧：")]),e._v(" "),n("span",{domProps:{textContent:e._s(e.item.bangumi.name)},on:{click:e.handleBangumiClick}})]):e._e()]),e._v(" "),e.isTrial?n("div",{class:e.$style.control},[n("VButton",{attrs:{size:"small",theme:"danger",text:""},on:{click:e.handleDelete}},[e._v("\n        拒绝\n      ")]),e._v(" "),n("VButton",{attrs:{size:"small",theme:"success"},on:{click:e.handlePass}},[e._v("\n        通过\n      ")])],1):e._e()])])}),[],!1,(function(e){this.$style=d.default.locals||d.default}),null,null);t.a=component.exports},301:function(e,t,n){"use strict";var r=n(257);n.n(r).a},377:function(e,t,n){"use strict";n.r(t);n(35),n(45),n(24),n(104),n(105),n(56),n(25);var r=n(57);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var l={name:"AdminQaTrial",components:{QaItem:n(294).a},computed:{query:function(){var e=this.$route.query;return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},e,{$axios:this.$axios,status:0})}},methods:{handleDelete:function(e){this.$refs.loader.delete(e)}},head:function(){return{title:"审核题目"}}},c=(n(301),n(34)),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"trial-qa"}},[n("FlowLoader",{ref:"loader",attrs:{func:"getBangumiQuestionTrials",type:"page",query:e.query},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.flow,o=t.extra;return n("div",{},e._l(r,(function(t,r){return n("QaItem",{key:t.id,attrs:{item:t,"is-trial":"",extra:o,order:r+1},on:{delete:e.handleDelete}})})),1)}},{key:"error",fn:function(t){var n=t.error;return[e._v("\n      "+e._s(n.message)+"\n    ")]}}])})],1)}),[],!1,null,null,null);t.default=component.exports}}]);