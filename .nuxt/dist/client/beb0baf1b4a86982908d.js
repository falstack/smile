(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{254:function(t,n,e){},297:function(t,n,e){"use strict";var r=e(254);e.n(r).a},373:function(t,n,e){"use strict";e.r(n);e(35),e(30),e(235),e(237),e(56);var r=e(238),l=e.n(r),o=(e(226),e(227)),c=e.n(o),h=(e(228),e(229)),m={name:"CreateBangumiQuestion",components:{VField:e.n(h).a,VButton:c.a,VRadio:l.a},data:function(){return{bangumi:null,submitting:!1,title:"",answers:[{value:"",key:0},{value:"",key:1},{value:"",key:2},{value:"",key:3}],rightOpt:-1,rule:null}},computed:{slug:function(){return this.$route.query.slug},rightAnswerOpts:function(){return this.answers.map((function(t){return{label:"答案".concat(t.key+1),value:t.key}}))}},mounted:function(){this.getBangumi(),this.getRule()},methods:{getBangumi:function(){var t=this;this.$axios.$get("v1/bangumi/show",{params:{slug:this.slug}}).then((function(n){t.bangumi=n})).catch((function(){}))},getRule:function(){var t=this;this.$axios.$get("v1/join/rule/show",{params:{slug:this.slug}}).then((function(data){t.rule=data})).catch()},submit:function(){var t=this;this.title.trim()?this.answers.map((function(t){return t.value})).filter((function(t){return t})).length<2?this.$toast.info("至少要有2个选项"):-1!==this.rightOpt?this.answers.filter((function(n){return n.key===t.rightOpt}))[0].value.trim()?(this.submitting=!0,this.$axios.$post("v1/join/create",{title:this.title,answers:this.answers.map((function(t){return t.value})).filter((function(t){return t})),right_index:this.rightOpt,bangumi_slug:this.slug}).then((function(){t.$toast.success("提交成功").then((function(){window.location.reload()}))})).catch((function(n){t.$toast.error(n.message),t.submitting=!1}))):this.$toast.info("正确选项不能为空"):this.$toast.info("请选择正确选项"):this.$toast.info("题目不能为空")}},head:function(){return{title:"添加题目"}}},f=(e(297),e(24)),component=Object(f.a)(m,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.bangumi?e("div",{ref:"form",attrs:{id:"create-bangumi-question",disabled:t.submitting,"label-position":"top"}},[e("div",[e("h1",[t._v("为《"+t._s(t.bangumi.name)+"》出题")]),t._v(" "),e("br"),t._v(" "),e("p",{staticClass:"form-tip"},[t._v("\n      题目提交完，需要审核通过之后才会入库\n    ")])]),t._v(" "),e("div",{attrs:{label:"题目"}},[e("VField",{attrs:{rows:2,type:"textarea",placeholder:"请输入题目",resize:"none",maxlength:"50","show-word-limit":""},model:{value:t.title,callback:function(n){t.title=n},expression:"title"}})],1),t._v(" "),t._m(0),t._v(" "),t._l(t.answers,(function(n,r){return e("div",{key:n.key,attrs:{label:"选项"+(r+1)}},[e("VField",{attrs:{placeholder:"请输入答案（20字以内）",maxlength:"20"},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"item.value"}})],1)})),t._v(" "),t._m(1),t._v(" "),e("div",{attrs:{label:"答案"}},[e("VRadio",{attrs:{label:t.rightAnswerOpts},model:{value:t.rightOpt,callback:function(n){t.rightOpt=n},expression:"rightOpt"}})],1),t._v(" "),e("div",[e("VButton",{attrs:{loading:t.submitting,type:"success",round:""},on:{click:t.submit}},[t._v("\n      提交\n    ")])],1)],2):t._e()}),[function(){var t=this.$createElement,n=this._self._c||t;return n("div",[n("p",{staticClass:"form-tip"},[this._v("\n      提示：选项至少提供两个，至多四个\n    ")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("div",[n("p",{staticClass:"form-tip"},[this._v("\n      提示：题目为单选题，正确选项不能为空\n    ")])])}],!1,null,null,null);n.default=component.exports}}]);