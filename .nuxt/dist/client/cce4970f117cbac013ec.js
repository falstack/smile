(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{235:function(t,e,n){"use strict";var r=n(2),l=n(164).trim;r({target:"String",proto:!0,forced:n(241)("trim")},{trim:function(){return l(this)}})},239:function(t,e,n){},240:function(t,e,n){t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=42)}({0:function(t,e,i){"use strict";function n(t,e,i,n,s,r,l,o){var a,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),l?(a=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},c._ssrRegister=a):s&&(a=o?function(){s.call(this,this.$root.$options.shadowRoot)}:s),a)if(c.functional){c._injectStyles=a;var d=c.render;c.render=function(t,e){return a.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,a):[a]}return{exports:t,options:c}}i.d(e,"a",(function(){return n}))},42:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-radio",class:["v-radio--"+t.size,{"v-radio--circle":t.circle},t.inline?"v-radio--hoz":"v-radio--ver"]},[t.isSingle?i("div",{staticClass:"v-radio__item",class:{"is-disabled":t.disabled,"is-selected":t.selected},on:{click:t._singleToggle}},[i("div",{staticClass:"v-radio__label"}),t._v(" "),t.text?i("div",{staticClass:"v-radio__text",domProps:{textContent:t._s(t.text)}}):t._e()]):i("div",{staticClass:"v-radio__list"},t._l(t.text,(function(e){return i("div",{key:t.pureText?e:e.value,staticClass:"v-radio__item",class:[{"is-disabled":t.disabled||!t.pureText&&e.disabled||t.max&&t.selected.length>=t.max&&-1===t.selected.indexOf(t.pureText?e:e.value)},{"is-selected":-1!==t.selected.indexOf(t.pureText?e:e.value)}],on:{click:function(i){return t._multiToggle(e)}}},[i("div",{staticClass:"v-radio__label"}),t._v(" "),i("div",{staticClass:"v-radio__text",domProps:{textContent:t._s(t.pureText?e:e.label)}})])})),0)])};n._withStripped=!0,i(62);var s={name:"VRadio",props:{value:{type:[Boolean,Array],required:!0},text:{type:[String,Array],required:!0},size:{type:String,default:"normal",validator:function(t){return~["normal","small"].indexOf(t)}},max:{type:Number,default:0},min:{type:Number,default:0},disabled:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:function(){var t="[object Boolean]"===Object.prototype.toString.call(this.value);return{selected:this.value,pureText:!!t||"string"==typeof this.text[0],isSingle:t}},watch:{value:function(t){this.selected=t},selected:function(t){this.$emit("input",t)}},methods:{_singleToggle:function(){this.disabled||this.readonly||(this.selected=!this.selected)},_multiToggle:function(t){if(!(this.disabled||this.readonly||!this.pureText&&t.disabled)){var e=this.selected.indexOf(this.pureText?t:t.value);if(-1===e)this.max&&this.selected.length>=this.max||this.selected.push(this.pureText?t:t.value);else{if(this.min&&this.selected.length<=this.min)return;this.selected.splice(e,1)}}},checkAll:function(t){var e=this;this.isSingle?this.selected=t:t?(this.selected=[],this.text.forEach((function(t){e.selected.push(e.pureText?t:t.value)}))):this.selected=[]},toggleAll:function(){this.isSingle?this.selected=!this.selected:this.checkAll(!this.selected.length)}}},r=i(0),l=Object(r.a)(s,n,[],!1,null,null,null);l.options.__file="src/components/radio/radio.vue";var o=l.exports;e.default=o},62:function(t,e,i){}})},241:function(t,e,n){var r=n(5),l=n(165);t.exports=function(t){return r((function(){return!!l[t]()||"​᠎"!="​᠎"[t]()||l[t].name!==t}))}},252:function(t,e,n){},295:function(t,e,n){"use strict";var r=n(252);n.n(r).a},368:function(t,e,n){"use strict";n.r(e);n(35),n(30),n(235),n(239),n(56);var r=n(240),l=n.n(r),o=(n(226),n(227)),c=n.n(o),d=(n(237),n(238)),f={name:"CreateBangumiQuestion",components:{VField:n.n(d).a,VButton:c.a,VRadio:l.a},data:function(){return{bangumi:null,submitting:!1,title:"",answers:[{value:"",key:0},{value:"",key:1},{value:"",key:2},{value:"",key:3}],rightOpt:-1,rule:null}},computed:{slug:function(){return this.$route.query.slug},rightAnswerOpts:function(){return this.answers.map((function(t){return{label:"答案".concat(t.key+1),value:t.key}}))}},mounted:function(){this.getBangumi(),this.getRule()},methods:{getBangumi:function(){var t=this;this.$axios.$get("v1/bangumi/show",{params:{slug:this.slug}}).then((function(e){t.bangumi=e})).catch((function(){}))},getRule:function(){var t=this;this.$axios.$get("v1/join/rule/show",{params:{slug:this.slug}}).then((function(data){t.rule=data})).catch()},submit:function(){var t=this;this.title.trim()?this.answers.map((function(t){return t.value})).filter((function(t){return t})).length<2?this.$toast.info("至少要有2个选项"):-1!==this.rightOpt?this.answers.filter((function(e){return e.key===t.rightOpt}))[0].value.trim()?(this.submitting=!0,this.$axios.$post("v1/join/create",{title:this.title,answers:this.answers.map((function(t){return t.value})).filter((function(t){return t})),right_index:this.rightOpt,bangumi_slug:this.slug}).then((function(){t.$toast.success("提交成功").then((function(){window.location.reload()}))})).catch((function(e){t.$toast.error(e.message),t.submitting=!1}))):this.$toast.info("正确选项不能为空"):this.$toast.info("请选择正确选项"):this.$toast.info("题目不能为空")}},head:{title:"添加题目"}},h=(n(295),n(24)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.bangumi?n("div",{ref:"form",attrs:{id:"create-bangumi-question",disabled:t.submitting,"label-position":"top"}},[n("div",[n("h1",[t._v("为《"+t._s(t.bangumi.name)+"》出题")]),t._v(" "),n("br"),t._v(" "),n("p",{staticClass:"form-tip"},[t._v("\n      题目提交完，需要审核通过之后才会入库\n    ")])]),t._v(" "),n("div",{attrs:{label:"题目"}},[n("VField",{attrs:{rows:2,type:"textarea",placeholder:"请输入题目",resize:"none",maxlength:"50","show-word-limit":""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),t._m(0),t._v(" "),t._l(t.answers,(function(e,r){return n("div",{key:e.key,attrs:{label:"选项"+(r+1)}},[n("VField",{attrs:{placeholder:"请输入答案（20字以内）",maxlength:"20"},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}})],1)})),t._v(" "),t._m(1),t._v(" "),n("div",{attrs:{label:"答案"}},[n("VRadio",{attrs:{text:t.rightAnswerOpts},model:{value:t.rightOpt,callback:function(e){t.rightOpt=e},expression:"rightOpt"}})],1),t._v(" "),n("div",[n("VButton",{attrs:{loading:t.submitting,type:"success",round:""},on:{click:t.submit}},[t._v("\n      提交\n    ")])],1)],2):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",{staticClass:"form-tip"},[this._v("\n      提示：选项至少提供两个，至多四个\n    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",{staticClass:"form-tip"},[this._v("\n      提示：题目为单选题，正确选项不能为空\n    ")])])}],!1,null,null,null);e.default=component.exports}}]);