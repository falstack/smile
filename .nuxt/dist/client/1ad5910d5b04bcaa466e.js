(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{239:function(t,e,n){t.exports={"qa-item":"qa-item_3N5Xs",qaItem:"qa-item_3N5Xs",header:"header_AMObU",order:"order_2Lrmw",title:"title_-CJOD",main:"main_2bbkH",answer:"answer_12nXM","is-right":"is-right_2Bjlo",isRight:"is-right_2Bjlo","is-selected":"is-selected_1s5R_",isSelected:"is-selected_1s5R_",footer:"footer_3zt4D",intro:"intro_1Z2UY",control:"control_3tb4E"}},248:function(t,e,n){"use strict";var r=n(239),l=n.n(r);e.default=l.a},249:function(t,e,n){},286:function(t,e,n){"use strict";n(241),n(56),n(10),n(76),n(222),n(55);var r=n(223),l=n.n(r),o=(n(220),n(221)),c={name:"QaItem",components:{VButton:n.n(o).a,VField:l.a},props:{item:{type:Object,required:!0},order:{type:Number,required:!0},isTrial:{type:Boolean,default:!1},extra:{type:Object,default:function(){}}},data:function(){var t=this;return{rightAnswer:function(){for(var e=t.item.id.toString(),n=t.extra.answers||{},r="",l=Object.keys(n),i=0;i<l.length;i++)if(l[i].toString()===e){r=n[l[i]];break}return r}(),title:this.item.title,loading:!1}},methods:{changeRightAnswer:function(t){this.isTrial&&(this.rightAnswer=t)},answerNumber:function(t){return["A","B","C","D"][t]},handleAnswerClick:function(t){this.isTrial||(this.rightAnswer=t,this.$emit("select",{questionId:this.item.id,answerId:t}))},handleUserClick:function(){this.$bridge.navigateTo({url:"/pages/user/show/index?slug=".concat(this.item.user.slug)})},handleBangumiClick:function(){this.$bridge.navigateTo({url:"/pages/bangumi/show/index?slug=".concat(this.item.bangumi.slug)})},handleDelete:function(){var t=this;this.loading||this.$alert({title:"提示",message:"删除后不可恢复，确认要删除吗？",buttons:["取消","确定"],callback:function(e){e&&(t.loading=!0,t.$axios.$post("v1/join/delete",{id:t.item.id}).then((function(){t.$toast.success("删除成功"),t.$emit("delete",t.item.id)})).catch((function(e){t.$toast.error(e.message)})).finally((function(){t.loading=!1})))}})},handlePass:function(){var t=this;!this.loading&&this.title&&(this.loading=!0,this.$axios.$post("v1/join/recommend",{id:this.item.id,right_id:this.rightAnswer,title:this.title}).then((function(){t.$toast.success("入库成功"),t.$emit("delete",t.item.id)})).catch((function(e){t.$toast.error(e.message)})).finally((function(){t.loading=!1})))}}},d=n(248),h=n(35);var component=Object(h.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.qaItem},[n("div",{class:t.$style.header},[t.isTrial?n("VField",{class:t.$style.title,attrs:{"min-row":1,"max-row":3,"max-len":50,close:!1,label:""+t.order},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}):[n("div",{class:t.$style.order,domProps:{textContent:t._s(t.order)}}),t._v(" "),n("p",{class:t.$style.title,domProps:{innerHTML:t._s(t.title)}})]],2),t._v(" "),n("div",{class:t.$style.main},t._l(t.item.answers,(function(e,r,l){var o,c;return n("div",{key:r,class:[t.$style.answer,(o={},o[t.$style.isSelected]=!t.isTrial&&r===t.rightAnswer,o)],on:{click:function(e){return t.handleAnswerClick(r)}}},[n("div",{class:[t.$style.order,(c={},c[t.$style.isRight]=t.isTrial&&r===t.rightAnswer,c)],domProps:{textContent:t._s(t.answerNumber(l))},on:{click:function(e){return t.changeRightAnswer(r)}}}),t._v(" "),n("p",{domProps:{innerHTML:t._s(e)}})])})),0),t._v(" "),n("div",{class:t.$style.footer},[n("div",{class:t.$style.intro},[n("div",{staticClass:"oneline"},[n("span",[t._v("出题人：")]),t._v(" "),n("span",{domProps:{textContent:t._s(t.item.user.nickname)},on:{click:t.handleUserClick}})]),t._v(" "),t.isTrial?n("div",{staticClass:"oneline"},[n("span",[t._v("番の剧：")]),t._v(" "),n("span",{domProps:{textContent:t._s(t.item.bangumi.name)},on:{click:t.handleBangumiClick}})]):t._e()]),t._v(" "),t.isTrial?n("div",{class:t.$style.control},[n("VButton",{attrs:{size:"small",theme:"danger",text:""},on:{click:t.handleDelete}},[t._v("\n        拒绝\n      ")]),t._v(" "),n("VButton",{attrs:{size:"small",theme:"success"},on:{click:t.handlePass}},[t._v("\n        通过\n      ")])],1):t._e()])])}),[],!1,(function(t){this.$style=d.default.locals||d.default}),null,null);e.a=component.exports},293:function(t,e,n){"use strict";var r=n(249);n.n(r).a},372:function(t,e,n){"use strict";n.r(e);var r={name:"AdminQaTrial",components:{QaItem:n(286).a},data:function(){return{loading:!1}},methods:{handleDelete:function(t){this.$refs.loader.delete(t)}},head:function(){return{title:"审核题目"}}},l=(n(293),n(35)),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"admin-qa-trial"}},[n("FlowLoader",{ref:"loader",attrs:{func:"getBangumiQuestionTrials",type:"page",query:{$axios:t.$axios,status:0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow,l=e.extra;return n("div",{},t._l(r,(function(e,r){return n("QaItem",{key:e.id,attrs:{item:e,"is-trial":"",extra:l,order:r+1},on:{delete:t.handleDelete}})})),1)}},{key:"error",fn:function(e){var n=e.error;return[t._v("\n      "+t._s(n.message)+"\n    ")]}}])})],1)}),[],!1,null,null,null);e.default=component.exports}}]);